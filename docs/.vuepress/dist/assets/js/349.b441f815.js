(window.webpackJsonp=window.webpackJsonp||[]).push([[349],{712:function(t,s,e){"use strict";e.r(s);var a=e(27),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"debugging-in-vscode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#debugging-in-vscode"}},[t._v("#")]),t._v(" Debugging in VSCode")]),t._v(" "),e("p",[t._v("在阅读源码时，通过"),e("code",[t._v("console")]),t._v("等方式硬调试，不仅消耗时间，并且不方便。")]),t._v(" "),e("p",[t._v("因此需要更科学的"),e("code",[t._v("debug")]),t._v("方式，利用VS Code的"),e("code",[t._v("Debug")]),t._v("功能，可以拥有看见全局变量、调用堆栈、断点调试、执行顺序等信息，断点地方的全部信息都会暴露，可以极高的提升阅读源码的效率。")]),t._v(" "),e("h2",{attrs:{id:"debug-panel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#debug-panel"}},[t._v("#")]),t._v(" Debug Panel")]),t._v(" "),e("p",[t._v("下图为VS Code中的debug panel。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/yuhongjing/img-folder/master/img/3FE392D0-606A-488F-B947-BFB3EDD27B73.png",alt:""}})]),t._v(" "),e("p",[t._v("左侧菜单的第四个蜘蛛图标，即是Debug调试工具。可以通过"),e("code",[t._v("command + shift + D")]),t._v("快捷键打开。")]),t._v(" "),e("h2",{attrs:{id:"体验一下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#体验一下"}},[t._v("#")]),t._v(" 体验一下")]),t._v(" "),e("p",[t._v("首先新建一个文件"),e("code",[t._v("app.js")]),t._v("，内容如下。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hello "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hello"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("然后点击小蜘蛛图标，进入Debug 面板，点击下图所示的"),e("code",[t._v("齿轮")]),t._v("图标。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/yuhongjing/img-folder/master/img/20200908203345.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("如果项目根目录已经存在.vscode目录，且目录下存在launch.json配置文件，则点击齿轮后会直接进入该文件。")]),t._v(" "),e("p",[t._v("否则需要进行初始化，手动配置Debug配置项。")])]),t._v(" "),e("p",[t._v("这时会出现如下选项，让你选择调试环境。VS Code内置了Node.js环境，其他环境需要自行安装扩展。")]),t._v(" "),e("p",[t._v("这里我们调试JS文件，选择Node.js。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/yuhongjing/img-folder/master/img/20200908203637.png",alt:""}})]),t._v(" "),e("p",[t._v("选择后，会生成一个"),e("code",[t._v("launch.json")]),t._v("文件，并会直接打开这个文件，配置内容如下。")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.2.0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"configurations"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"request"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"launch"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Launch Program"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"program"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${workspaceFolder}/index.js"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("按"),e("code",[t._v("command + shift + E")]),t._v("回到目录列表会看见多了一个"),e("code",[t._v(".vscode")]),t._v("目录，目录下面就是该"),e("code",[t._v("launch.json")]),t._v("文件。可以点击右下角的"),e("code",[t._v("Add Configuration")]),t._v("按钮，会弹出如下配置供选择，在这个配置文件里可以充分利用它的智能感知功能，我们选择"),e("code",[t._v("Node.js: Launch Program")]),t._v("。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/yuhongjing/img-folder/master/img/20200908204237.png",alt:""}})]),t._v(" "),e("p",[t._v("它会自动帮我们生成该配置的常用项，我们将其中的"),e("code",[t._v('"program": "${file}"')]),t._v("改为"),e("code",[t._v('"program": "${workspaceRoot}/app.js"')]),t._v("，在这个配置文件中，有挺多内置变量可以直接使用，"),e("code",[t._v("${file}")]),t._v("表示当前活跃的文件，"),e("code",[t._v("${workspaceRoot}")]),t._v("表示当前项目的根目录，完整的内置变量可以参考"),e("a",{attrs:{href:"https://code.visualstudio.com/docs/editor/variables-reference",target:"_blank",rel:"noopener noreferrer"}},[t._v("手册"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("blockquote",[e("p",[t._v("上面配置项有个"),e("code",[t._v("request")]),t._v("字段，它有两个值可以选择："),e("code",[t._v("launch")]),t._v("和"),e("code",[t._v("attach")]),t._v("。")]),t._v(" "),e("p",[t._v("如果调试的是"),e("code",[t._v("web")]),t._v("项目，浏览器已经直接打开这个项目了，这时我们可以使用"),e("code",[t._v("attach")]),t._v("，将"),e("code",[t._v("debugger")]),t._v("附加在运行的"),e("code",[t._v("web")]),t._v("项目。")]),t._v(" "),e("p",[t._v("否则，选择"),e("code",[t._v("attach")]),t._v("，则是直接由编辑器启动这个程序。")])]),t._v(" "),e("p",[t._v("在开始"),e("code",[t._v("debug")]),t._v("之前，我们先在"),e("code",[t._v("app.js")]),t._v("的第二行最左边打一个断点。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/yuhongjing/img-folder/master/img/20200908205207.png",alt:""}})]),t._v(" "),e("p",[e("code",[t._v("configurations")]),t._v("里面的"),e("code",[t._v("name")]),t._v("字段会显示在"),e("code",[t._v("Debug")]),t._v("最上面的下拉列表里")]),t._v(" "),e("p",[t._v("点击小齿轮左边的框就可以选择刚才添加的配置，对应与"),e("code",[t._v("configurations")]),t._v("里面的"),e("code",[t._v("name")]),t._v("字段，选择"),e("code",[t._v("Launch Program")])]),t._v(" "),e("p",[t._v("然后点击左边的小绿色三角启动"),e("code",[t._v("debug(F5)")]),t._v("，然后就可以看到程序暂停在刚才打的断点这行了")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/yuhongjing/img-folder/master/img/20200908205335.png",alt:""}})]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/yuhongjing/img-folder/master/img/0D4EE4DC-ABB2-4482-9749-391D457D03D8.png",alt:""}})]),t._v(" "),e("p",[t._v("可以看到最上面的工具栏就是所有的调试操作：")]),t._v(" "),e("ul",[e("li",[t._v("继续/暂停 F5")]),t._v(" "),e("li",[t._v("单步跳过 F10")]),t._v(" "),e("li",[t._v("单步调试 F11")]),t._v(" "),e("li",[t._v("单步跳出 "),e("code",[t._v("shift + F11")])]),t._v(" "),e("li",[t._v("重启 "),e("code",[t._v("shift + command + F5")])]),t._v(" "),e("li",[t._v("停止 "),e("code",[t._v("shift + F5")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);