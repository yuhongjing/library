<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>clean-code-javascript | 余鸿靖的手册小站</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/library/logo.png">
    <link rel="manifest" href="/library/manifest.json">
    <link rel="apple-touch-icon" href="/library/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/library/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="小站目前有542篇文章共950801字，继续努力">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/library/assets/css/0.styles.df80320a.css" as="style"><link rel="preload" href="/library/assets/js/app.14bf9413.js" as="script"><link rel="preload" href="/library/assets/js/2.148df1f8.js" as="script"><link rel="preload" href="/library/assets/js/408.7af1a51a.js" as="script"><link rel="preload" href="/library/assets/js/3.4d3fc6f6.js" as="script"><link rel="prefetch" href="/library/assets/js/10.cee6fc2c.js"><link rel="prefetch" href="/library/assets/js/100.5a772cbd.js"><link rel="prefetch" href="/library/assets/js/101.9355e5c8.js"><link rel="prefetch" href="/library/assets/js/102.2504ac7e.js"><link rel="prefetch" href="/library/assets/js/103.789909b1.js"><link rel="prefetch" href="/library/assets/js/104.cd8fb7d3.js"><link rel="prefetch" href="/library/assets/js/105.0719d0cd.js"><link rel="prefetch" href="/library/assets/js/106.103cc7e6.js"><link rel="prefetch" href="/library/assets/js/107.323bdff5.js"><link rel="prefetch" href="/library/assets/js/108.a046e19f.js"><link rel="prefetch" href="/library/assets/js/109.514a1015.js"><link rel="prefetch" href="/library/assets/js/11.79112eb4.js"><link rel="prefetch" href="/library/assets/js/110.5bf310da.js"><link rel="prefetch" href="/library/assets/js/111.95773032.js"><link rel="prefetch" href="/library/assets/js/112.9ef26a81.js"><link rel="prefetch" href="/library/assets/js/113.372cc97e.js"><link rel="prefetch" href="/library/assets/js/114.b7f11c33.js"><link rel="prefetch" href="/library/assets/js/115.81067a91.js"><link rel="prefetch" href="/library/assets/js/116.5244b9b8.js"><link rel="prefetch" href="/library/assets/js/117.a9018a77.js"><link rel="prefetch" href="/library/assets/js/118.fafb6139.js"><link rel="prefetch" href="/library/assets/js/119.bb2a96a3.js"><link rel="prefetch" href="/library/assets/js/12.1ac438d6.js"><link rel="prefetch" href="/library/assets/js/120.be972bb6.js"><link rel="prefetch" href="/library/assets/js/121.c1eebcb3.js"><link rel="prefetch" href="/library/assets/js/122.35ae14a0.js"><link rel="prefetch" href="/library/assets/js/123.e932af07.js"><link rel="prefetch" href="/library/assets/js/124.ef394885.js"><link rel="prefetch" href="/library/assets/js/125.71944ef3.js"><link rel="prefetch" href="/library/assets/js/126.7b71547a.js"><link rel="prefetch" href="/library/assets/js/127.74680caa.js"><link rel="prefetch" href="/library/assets/js/128.50ca7808.js"><link rel="prefetch" href="/library/assets/js/129.bde2e25d.js"><link rel="prefetch" href="/library/assets/js/13.8164f662.js"><link rel="prefetch" href="/library/assets/js/130.d4acc508.js"><link rel="prefetch" href="/library/assets/js/131.d8870df5.js"><link rel="prefetch" href="/library/assets/js/132.6b833d90.js"><link rel="prefetch" href="/library/assets/js/133.93cf4c2a.js"><link rel="prefetch" href="/library/assets/js/134.75bf898c.js"><link rel="prefetch" href="/library/assets/js/135.249a7887.js"><link rel="prefetch" href="/library/assets/js/136.22a2cf11.js"><link rel="prefetch" href="/library/assets/js/137.c4c04d2c.js"><link rel="prefetch" href="/library/assets/js/138.cc0162b0.js"><link rel="prefetch" href="/library/assets/js/139.1a7ade37.js"><link rel="prefetch" href="/library/assets/js/14.f8363fa1.js"><link rel="prefetch" href="/library/assets/js/140.22f344bf.js"><link rel="prefetch" href="/library/assets/js/141.fcda7943.js"><link rel="prefetch" href="/library/assets/js/142.0e9c1b44.js"><link rel="prefetch" href="/library/assets/js/143.9ba1c8b6.js"><link rel="prefetch" href="/library/assets/js/144.7808a533.js"><link rel="prefetch" href="/library/assets/js/145.f0de7ef1.js"><link rel="prefetch" href="/library/assets/js/146.9ada3aea.js"><link rel="prefetch" href="/library/assets/js/147.4cbbc017.js"><link rel="prefetch" href="/library/assets/js/148.70dd21af.js"><link rel="prefetch" href="/library/assets/js/149.99cff365.js"><link rel="prefetch" href="/library/assets/js/15.040ac839.js"><link rel="prefetch" href="/library/assets/js/150.d0bfd1cd.js"><link rel="prefetch" href="/library/assets/js/151.591114e7.js"><link rel="prefetch" href="/library/assets/js/152.ba14991c.js"><link rel="prefetch" href="/library/assets/js/153.68e9c636.js"><link rel="prefetch" href="/library/assets/js/154.af99f653.js"><link rel="prefetch" href="/library/assets/js/155.243609e3.js"><link rel="prefetch" href="/library/assets/js/156.2f3f5e59.js"><link rel="prefetch" href="/library/assets/js/157.6f53a13a.js"><link rel="prefetch" href="/library/assets/js/158.7baf5095.js"><link rel="prefetch" href="/library/assets/js/159.131abf3b.js"><link rel="prefetch" href="/library/assets/js/16.4b707d7c.js"><link rel="prefetch" href="/library/assets/js/160.672201bc.js"><link rel="prefetch" href="/library/assets/js/161.0f22c823.js"><link rel="prefetch" href="/library/assets/js/162.be9073e8.js"><link rel="prefetch" href="/library/assets/js/163.e92d2cce.js"><link rel="prefetch" href="/library/assets/js/164.c7b1a000.js"><link rel="prefetch" href="/library/assets/js/165.9f4a50d0.js"><link rel="prefetch" href="/library/assets/js/166.1e9861d8.js"><link rel="prefetch" href="/library/assets/js/167.5de27bc4.js"><link rel="prefetch" href="/library/assets/js/168.32b856cc.js"><link rel="prefetch" href="/library/assets/js/169.65fd0a69.js"><link rel="prefetch" href="/library/assets/js/17.fb03aa88.js"><link rel="prefetch" href="/library/assets/js/170.9ac27e19.js"><link rel="prefetch" href="/library/assets/js/171.9534328d.js"><link rel="prefetch" href="/library/assets/js/172.bf9789f8.js"><link rel="prefetch" href="/library/assets/js/173.20de8c85.js"><link rel="prefetch" href="/library/assets/js/174.0b616a6a.js"><link rel="prefetch" href="/library/assets/js/175.9d856b53.js"><link rel="prefetch" href="/library/assets/js/176.1a03fb7b.js"><link rel="prefetch" href="/library/assets/js/177.2e855d45.js"><link rel="prefetch" href="/library/assets/js/178.f8ea3722.js"><link rel="prefetch" href="/library/assets/js/179.b382e902.js"><link rel="prefetch" href="/library/assets/js/18.9460591f.js"><link rel="prefetch" href="/library/assets/js/180.6a9745f1.js"><link rel="prefetch" href="/library/assets/js/181.0f5406f6.js"><link rel="prefetch" href="/library/assets/js/182.56d624ea.js"><link rel="prefetch" href="/library/assets/js/183.c8036ba4.js"><link rel="prefetch" href="/library/assets/js/184.a4b14a1a.js"><link rel="prefetch" href="/library/assets/js/185.524102df.js"><link rel="prefetch" href="/library/assets/js/186.00d0c5b1.js"><link rel="prefetch" href="/library/assets/js/187.27d3b317.js"><link rel="prefetch" href="/library/assets/js/188.c43cf733.js"><link rel="prefetch" href="/library/assets/js/189.b6fd0a69.js"><link rel="prefetch" href="/library/assets/js/19.0922e852.js"><link rel="prefetch" href="/library/assets/js/190.e81f32db.js"><link rel="prefetch" href="/library/assets/js/191.f30de150.js"><link rel="prefetch" href="/library/assets/js/192.ed1335e3.js"><link rel="prefetch" href="/library/assets/js/193.d9790498.js"><link rel="prefetch" href="/library/assets/js/194.f3ae3159.js"><link rel="prefetch" href="/library/assets/js/195.8cf43f93.js"><link rel="prefetch" href="/library/assets/js/196.79e6391f.js"><link rel="prefetch" href="/library/assets/js/197.00629d42.js"><link rel="prefetch" href="/library/assets/js/198.b7485a90.js"><link rel="prefetch" href="/library/assets/js/199.4fd9ee2d.js"><link rel="prefetch" href="/library/assets/js/20.4cf82aef.js"><link rel="prefetch" href="/library/assets/js/200.df5c56b6.js"><link rel="prefetch" href="/library/assets/js/201.c6bc567f.js"><link rel="prefetch" href="/library/assets/js/202.c331dc0e.js"><link rel="prefetch" href="/library/assets/js/203.1f935115.js"><link rel="prefetch" href="/library/assets/js/204.d780456a.js"><link rel="prefetch" href="/library/assets/js/205.663dd324.js"><link rel="prefetch" href="/library/assets/js/206.62656e08.js"><link rel="prefetch" href="/library/assets/js/207.271233ca.js"><link rel="prefetch" href="/library/assets/js/208.74aec31f.js"><link rel="prefetch" href="/library/assets/js/209.0dedcb3f.js"><link rel="prefetch" href="/library/assets/js/21.040148c2.js"><link rel="prefetch" href="/library/assets/js/210.138faf41.js"><link rel="prefetch" href="/library/assets/js/211.f8cd9133.js"><link rel="prefetch" href="/library/assets/js/212.eed9091d.js"><link rel="prefetch" href="/library/assets/js/213.fbad8da0.js"><link rel="prefetch" href="/library/assets/js/214.97e73b65.js"><link rel="prefetch" href="/library/assets/js/215.a9ea8062.js"><link rel="prefetch" href="/library/assets/js/216.881166e7.js"><link rel="prefetch" href="/library/assets/js/217.84370dec.js"><link rel="prefetch" href="/library/assets/js/218.ac36e635.js"><link rel="prefetch" href="/library/assets/js/219.196af02a.js"><link rel="prefetch" href="/library/assets/js/22.b4a94a66.js"><link rel="prefetch" href="/library/assets/js/220.f92cb963.js"><link rel="prefetch" href="/library/assets/js/221.d6c88ef4.js"><link rel="prefetch" href="/library/assets/js/222.89ff4557.js"><link rel="prefetch" href="/library/assets/js/223.1f29116d.js"><link rel="prefetch" href="/library/assets/js/224.7c9ef60d.js"><link rel="prefetch" href="/library/assets/js/225.3928b1eb.js"><link rel="prefetch" href="/library/assets/js/226.97349448.js"><link rel="prefetch" href="/library/assets/js/227.6aeecddf.js"><link rel="prefetch" href="/library/assets/js/228.10eca4b2.js"><link rel="prefetch" href="/library/assets/js/229.0b175f64.js"><link rel="prefetch" href="/library/assets/js/23.302f10bd.js"><link rel="prefetch" href="/library/assets/js/230.da5de3d5.js"><link rel="prefetch" href="/library/assets/js/231.5dbfbee2.js"><link rel="prefetch" href="/library/assets/js/232.c1c4bd89.js"><link rel="prefetch" href="/library/assets/js/233.f4d87c61.js"><link rel="prefetch" href="/library/assets/js/234.2994e14b.js"><link rel="prefetch" href="/library/assets/js/235.44dd2c29.js"><link rel="prefetch" href="/library/assets/js/236.341b8f6c.js"><link rel="prefetch" href="/library/assets/js/237.65d28b45.js"><link rel="prefetch" href="/library/assets/js/238.d92c0333.js"><link rel="prefetch" href="/library/assets/js/239.e9d0fd93.js"><link rel="prefetch" href="/library/assets/js/24.3db7e47d.js"><link rel="prefetch" href="/library/assets/js/240.78038133.js"><link rel="prefetch" href="/library/assets/js/241.6d916ba1.js"><link rel="prefetch" href="/library/assets/js/242.3fdf3cd7.js"><link rel="prefetch" href="/library/assets/js/243.49f21908.js"><link rel="prefetch" href="/library/assets/js/244.e1d876f0.js"><link rel="prefetch" href="/library/assets/js/245.7bc95ca1.js"><link rel="prefetch" href="/library/assets/js/246.07b2eb54.js"><link rel="prefetch" href="/library/assets/js/247.eeed47b3.js"><link rel="prefetch" href="/library/assets/js/248.5fb25885.js"><link rel="prefetch" href="/library/assets/js/249.3f42bb65.js"><link rel="prefetch" href="/library/assets/js/25.09319934.js"><link rel="prefetch" href="/library/assets/js/250.b26ed3aa.js"><link rel="prefetch" href="/library/assets/js/251.b2ed70ac.js"><link rel="prefetch" href="/library/assets/js/252.3c8886d2.js"><link rel="prefetch" href="/library/assets/js/253.5797268a.js"><link rel="prefetch" href="/library/assets/js/254.bfc92ccc.js"><link rel="prefetch" href="/library/assets/js/255.70315de2.js"><link rel="prefetch" href="/library/assets/js/256.759df5a4.js"><link rel="prefetch" href="/library/assets/js/257.03dd5996.js"><link rel="prefetch" href="/library/assets/js/258.7d56d94f.js"><link rel="prefetch" href="/library/assets/js/259.476b5639.js"><link rel="prefetch" href="/library/assets/js/26.ae93e36e.js"><link rel="prefetch" href="/library/assets/js/260.1be9ef34.js"><link rel="prefetch" href="/library/assets/js/261.06dfdafb.js"><link rel="prefetch" href="/library/assets/js/262.01f1e78c.js"><link rel="prefetch" href="/library/assets/js/263.b1734bba.js"><link rel="prefetch" href="/library/assets/js/264.9f6d918a.js"><link rel="prefetch" href="/library/assets/js/265.4eb8dd5b.js"><link rel="prefetch" href="/library/assets/js/266.d34a82cc.js"><link rel="prefetch" href="/library/assets/js/267.08ec556b.js"><link rel="prefetch" href="/library/assets/js/268.96d8960a.js"><link rel="prefetch" href="/library/assets/js/269.ac54bbe8.js"><link rel="prefetch" href="/library/assets/js/27.3560fec9.js"><link rel="prefetch" href="/library/assets/js/270.dbe3acd9.js"><link rel="prefetch" href="/library/assets/js/271.2693518f.js"><link rel="prefetch" href="/library/assets/js/272.2faa0d11.js"><link rel="prefetch" href="/library/assets/js/273.ac54f70a.js"><link rel="prefetch" href="/library/assets/js/274.0547bd29.js"><link rel="prefetch" href="/library/assets/js/275.74e4bb82.js"><link rel="prefetch" href="/library/assets/js/276.5ef239fc.js"><link rel="prefetch" href="/library/assets/js/277.c3fbf493.js"><link rel="prefetch" href="/library/assets/js/278.56c8a1f8.js"><link rel="prefetch" href="/library/assets/js/279.623866ee.js"><link rel="prefetch" href="/library/assets/js/28.edc00b2f.js"><link rel="prefetch" href="/library/assets/js/280.5b49f969.js"><link rel="prefetch" href="/library/assets/js/281.482771ba.js"><link rel="prefetch" href="/library/assets/js/282.e075df37.js"><link rel="prefetch" href="/library/assets/js/283.a744b946.js"><link rel="prefetch" href="/library/assets/js/284.ac8e41a6.js"><link rel="prefetch" href="/library/assets/js/285.f21e404d.js"><link rel="prefetch" href="/library/assets/js/286.77bffdb3.js"><link rel="prefetch" href="/library/assets/js/287.d626bd8a.js"><link rel="prefetch" href="/library/assets/js/288.3fa8c215.js"><link rel="prefetch" href="/library/assets/js/289.cd461e59.js"><link rel="prefetch" href="/library/assets/js/29.19509bdc.js"><link rel="prefetch" href="/library/assets/js/290.3e64e70f.js"><link rel="prefetch" href="/library/assets/js/291.9855855c.js"><link rel="prefetch" href="/library/assets/js/292.36ff9529.js"><link rel="prefetch" href="/library/assets/js/293.f6f9ba3b.js"><link rel="prefetch" href="/library/assets/js/294.3490c490.js"><link rel="prefetch" href="/library/assets/js/295.a9be0fb9.js"><link rel="prefetch" href="/library/assets/js/296.dfc303e1.js"><link rel="prefetch" href="/library/assets/js/297.2188fbe0.js"><link rel="prefetch" href="/library/assets/js/298.f6413e77.js"><link rel="prefetch" href="/library/assets/js/299.f4fc11c0.js"><link rel="prefetch" href="/library/assets/js/30.4b6b5d57.js"><link rel="prefetch" href="/library/assets/js/300.eb5784cc.js"><link rel="prefetch" href="/library/assets/js/301.aabc5866.js"><link rel="prefetch" href="/library/assets/js/302.5a205fa0.js"><link rel="prefetch" href="/library/assets/js/303.6b3efb99.js"><link rel="prefetch" href="/library/assets/js/304.e6b1ebf5.js"><link rel="prefetch" href="/library/assets/js/305.e7676c48.js"><link rel="prefetch" href="/library/assets/js/306.3daed49c.js"><link rel="prefetch" href="/library/assets/js/307.acf600e5.js"><link rel="prefetch" href="/library/assets/js/308.d723d0d6.js"><link rel="prefetch" href="/library/assets/js/309.48e69917.js"><link rel="prefetch" href="/library/assets/js/31.39979ec2.js"><link rel="prefetch" href="/library/assets/js/310.b8401cb0.js"><link rel="prefetch" href="/library/assets/js/311.5ef12bae.js"><link rel="prefetch" href="/library/assets/js/312.062c9373.js"><link rel="prefetch" href="/library/assets/js/313.4a7671ef.js"><link rel="prefetch" href="/library/assets/js/314.317c4292.js"><link rel="prefetch" href="/library/assets/js/315.c45ffc1d.js"><link rel="prefetch" href="/library/assets/js/316.c06ef2c6.js"><link rel="prefetch" href="/library/assets/js/317.f287077d.js"><link rel="prefetch" href="/library/assets/js/318.39064186.js"><link rel="prefetch" href="/library/assets/js/319.89bf7e73.js"><link rel="prefetch" href="/library/assets/js/32.fb9d686f.js"><link rel="prefetch" href="/library/assets/js/320.9c8a0d80.js"><link rel="prefetch" href="/library/assets/js/321.4741ba5b.js"><link rel="prefetch" href="/library/assets/js/322.128c4c83.js"><link rel="prefetch" href="/library/assets/js/323.fabafec3.js"><link rel="prefetch" href="/library/assets/js/324.639b88c6.js"><link rel="prefetch" href="/library/assets/js/325.a3eed290.js"><link rel="prefetch" href="/library/assets/js/326.451917b7.js"><link rel="prefetch" href="/library/assets/js/327.2348f023.js"><link rel="prefetch" href="/library/assets/js/328.9184317d.js"><link rel="prefetch" href="/library/assets/js/329.cdb46210.js"><link rel="prefetch" href="/library/assets/js/33.72cbc94a.js"><link rel="prefetch" href="/library/assets/js/330.c9029a08.js"><link rel="prefetch" href="/library/assets/js/331.0630f8f0.js"><link rel="prefetch" href="/library/assets/js/332.b5cea0c7.js"><link rel="prefetch" href="/library/assets/js/333.acf7529a.js"><link rel="prefetch" href="/library/assets/js/334.1a21592d.js"><link rel="prefetch" href="/library/assets/js/335.bc45d073.js"><link rel="prefetch" href="/library/assets/js/336.84c413b9.js"><link rel="prefetch" href="/library/assets/js/337.3be6dd8b.js"><link rel="prefetch" href="/library/assets/js/338.f324aa3d.js"><link rel="prefetch" href="/library/assets/js/339.d793273f.js"><link rel="prefetch" href="/library/assets/js/34.6e6fe3af.js"><link rel="prefetch" href="/library/assets/js/340.66e4c4a8.js"><link rel="prefetch" href="/library/assets/js/341.1d38c3f9.js"><link rel="prefetch" href="/library/assets/js/342.92acf76b.js"><link rel="prefetch" href="/library/assets/js/343.2fcfa21f.js"><link rel="prefetch" href="/library/assets/js/344.f8709e93.js"><link rel="prefetch" href="/library/assets/js/345.3283b9bc.js"><link rel="prefetch" href="/library/assets/js/346.063fc438.js"><link rel="prefetch" href="/library/assets/js/347.4907dcd0.js"><link rel="prefetch" href="/library/assets/js/348.b3ba7203.js"><link rel="prefetch" href="/library/assets/js/349.1295a9dd.js"><link rel="prefetch" href="/library/assets/js/35.c069147f.js"><link rel="prefetch" href="/library/assets/js/350.5e3d9f08.js"><link rel="prefetch" href="/library/assets/js/351.1b8eeea6.js"><link rel="prefetch" href="/library/assets/js/352.e700ed9d.js"><link rel="prefetch" href="/library/assets/js/353.d7237932.js"><link rel="prefetch" href="/library/assets/js/354.5d15e9bb.js"><link rel="prefetch" href="/library/assets/js/355.01c065f9.js"><link rel="prefetch" href="/library/assets/js/356.6693c20d.js"><link rel="prefetch" href="/library/assets/js/357.1f06dc8e.js"><link rel="prefetch" href="/library/assets/js/358.9d986f2b.js"><link rel="prefetch" href="/library/assets/js/359.2d669c8f.js"><link rel="prefetch" href="/library/assets/js/36.caa87b16.js"><link rel="prefetch" href="/library/assets/js/360.a645d5bc.js"><link rel="prefetch" href="/library/assets/js/361.befcd667.js"><link rel="prefetch" href="/library/assets/js/362.73b66b55.js"><link rel="prefetch" href="/library/assets/js/363.a5097beb.js"><link rel="prefetch" href="/library/assets/js/364.eb266e83.js"><link rel="prefetch" href="/library/assets/js/365.41893a6d.js"><link rel="prefetch" href="/library/assets/js/366.5a1bb0f0.js"><link rel="prefetch" href="/library/assets/js/367.fd08e8c9.js"><link rel="prefetch" href="/library/assets/js/368.3b06a097.js"><link rel="prefetch" href="/library/assets/js/369.6706b958.js"><link rel="prefetch" href="/library/assets/js/37.7dd9ad62.js"><link rel="prefetch" href="/library/assets/js/370.9e8f4af9.js"><link rel="prefetch" href="/library/assets/js/371.8f46d872.js"><link rel="prefetch" href="/library/assets/js/372.70827e6d.js"><link rel="prefetch" href="/library/assets/js/373.ed52727e.js"><link rel="prefetch" href="/library/assets/js/374.1896789f.js"><link rel="prefetch" href="/library/assets/js/375.c57cf09f.js"><link rel="prefetch" href="/library/assets/js/376.79b81a50.js"><link rel="prefetch" href="/library/assets/js/377.0e223c6e.js"><link rel="prefetch" href="/library/assets/js/378.cf67d9a3.js"><link rel="prefetch" href="/library/assets/js/379.e6267d73.js"><link rel="prefetch" href="/library/assets/js/38.f29be220.js"><link rel="prefetch" href="/library/assets/js/380.c5e83270.js"><link rel="prefetch" href="/library/assets/js/381.f8417893.js"><link rel="prefetch" href="/library/assets/js/382.aa257915.js"><link rel="prefetch" href="/library/assets/js/383.4b9aea78.js"><link rel="prefetch" href="/library/assets/js/384.a01d6cec.js"><link rel="prefetch" href="/library/assets/js/385.e4803045.js"><link rel="prefetch" href="/library/assets/js/386.e81d1f06.js"><link rel="prefetch" href="/library/assets/js/387.763bbc1e.js"><link rel="prefetch" href="/library/assets/js/388.300eb047.js"><link rel="prefetch" href="/library/assets/js/389.527f21d1.js"><link rel="prefetch" href="/library/assets/js/39.08a4122c.js"><link rel="prefetch" href="/library/assets/js/390.1939ca2a.js"><link rel="prefetch" href="/library/assets/js/391.e418bac9.js"><link rel="prefetch" href="/library/assets/js/392.c07ec57f.js"><link rel="prefetch" href="/library/assets/js/393.d8154d01.js"><link rel="prefetch" href="/library/assets/js/394.15b583a4.js"><link rel="prefetch" href="/library/assets/js/395.3ab361eb.js"><link rel="prefetch" href="/library/assets/js/396.fc958e4f.js"><link rel="prefetch" href="/library/assets/js/397.d0f6f2a5.js"><link rel="prefetch" href="/library/assets/js/398.56c13839.js"><link rel="prefetch" href="/library/assets/js/399.43d8d36c.js"><link rel="prefetch" href="/library/assets/js/4.4c4d2edf.js"><link rel="prefetch" href="/library/assets/js/40.177a8db2.js"><link rel="prefetch" href="/library/assets/js/400.59afc2a5.js"><link rel="prefetch" href="/library/assets/js/401.c040908c.js"><link rel="prefetch" href="/library/assets/js/402.b9ebe3fc.js"><link rel="prefetch" href="/library/assets/js/403.65b90fa2.js"><link rel="prefetch" href="/library/assets/js/404.0792a7a9.js"><link rel="prefetch" href="/library/assets/js/405.ee041ca8.js"><link rel="prefetch" href="/library/assets/js/406.a07a63f2.js"><link rel="prefetch" href="/library/assets/js/407.ad01a969.js"><link rel="prefetch" href="/library/assets/js/409.4670d7c8.js"><link rel="prefetch" href="/library/assets/js/41.51e77f74.js"><link rel="prefetch" href="/library/assets/js/410.8c3d8705.js"><link rel="prefetch" href="/library/assets/js/411.bca6ff3c.js"><link rel="prefetch" href="/library/assets/js/412.1ddf2ffd.js"><link rel="prefetch" href="/library/assets/js/413.98d477b7.js"><link rel="prefetch" href="/library/assets/js/414.d256c2d0.js"><link rel="prefetch" href="/library/assets/js/415.ccd0c930.js"><link rel="prefetch" href="/library/assets/js/416.f1f83b39.js"><link rel="prefetch" href="/library/assets/js/417.56fa6080.js"><link rel="prefetch" href="/library/assets/js/418.76aee942.js"><link rel="prefetch" href="/library/assets/js/419.46adfb98.js"><link rel="prefetch" href="/library/assets/js/42.1967573b.js"><link rel="prefetch" href="/library/assets/js/420.9c82aa0e.js"><link rel="prefetch" href="/library/assets/js/421.5aa4064e.js"><link rel="prefetch" href="/library/assets/js/422.3e723240.js"><link rel="prefetch" href="/library/assets/js/423.4052d6b4.js"><link rel="prefetch" href="/library/assets/js/424.dc7ec205.js"><link rel="prefetch" href="/library/assets/js/425.80534dc3.js"><link rel="prefetch" href="/library/assets/js/426.e9e6a2cd.js"><link rel="prefetch" href="/library/assets/js/427.97587b5d.js"><link rel="prefetch" href="/library/assets/js/428.8b72b32d.js"><link rel="prefetch" href="/library/assets/js/429.b1f69120.js"><link rel="prefetch" href="/library/assets/js/43.8e33e4f5.js"><link rel="prefetch" href="/library/assets/js/430.9c9f1867.js"><link rel="prefetch" href="/library/assets/js/431.659118b9.js"><link rel="prefetch" href="/library/assets/js/432.400969b1.js"><link rel="prefetch" href="/library/assets/js/433.dac1553d.js"><link rel="prefetch" href="/library/assets/js/434.c380d3e8.js"><link rel="prefetch" href="/library/assets/js/435.f5ae3394.js"><link rel="prefetch" href="/library/assets/js/436.de6d4b70.js"><link rel="prefetch" href="/library/assets/js/437.fc0e7822.js"><link rel="prefetch" href="/library/assets/js/438.27c2cfce.js"><link rel="prefetch" href="/library/assets/js/439.fbfe308b.js"><link rel="prefetch" href="/library/assets/js/44.6046f73b.js"><link rel="prefetch" href="/library/assets/js/440.630621b1.js"><link rel="prefetch" href="/library/assets/js/441.8cf0f32e.js"><link rel="prefetch" href="/library/assets/js/442.d10916ed.js"><link rel="prefetch" href="/library/assets/js/443.c8f8b063.js"><link rel="prefetch" href="/library/assets/js/444.2ce48717.js"><link rel="prefetch" href="/library/assets/js/445.4c8478e6.js"><link rel="prefetch" href="/library/assets/js/446.28a224c9.js"><link rel="prefetch" href="/library/assets/js/447.b9750dd5.js"><link rel="prefetch" href="/library/assets/js/448.853234d2.js"><link rel="prefetch" href="/library/assets/js/449.b551b5c7.js"><link rel="prefetch" href="/library/assets/js/45.a5a9d8f7.js"><link rel="prefetch" href="/library/assets/js/450.dc0b46ce.js"><link rel="prefetch" href="/library/assets/js/451.d6cbce81.js"><link rel="prefetch" href="/library/assets/js/452.9b4d20ec.js"><link rel="prefetch" href="/library/assets/js/453.d955108c.js"><link rel="prefetch" href="/library/assets/js/454.e60ea7ce.js"><link rel="prefetch" href="/library/assets/js/455.440f5517.js"><link rel="prefetch" href="/library/assets/js/456.47f748d3.js"><link rel="prefetch" href="/library/assets/js/457.908ba942.js"><link rel="prefetch" href="/library/assets/js/458.a7412374.js"><link rel="prefetch" href="/library/assets/js/459.f8ae9994.js"><link rel="prefetch" href="/library/assets/js/46.12511535.js"><link rel="prefetch" href="/library/assets/js/460.24bca80f.js"><link rel="prefetch" href="/library/assets/js/461.75ac872d.js"><link rel="prefetch" href="/library/assets/js/462.424e73d3.js"><link rel="prefetch" href="/library/assets/js/463.ad7b46fa.js"><link rel="prefetch" href="/library/assets/js/464.4bd4108d.js"><link rel="prefetch" href="/library/assets/js/465.e8bc1959.js"><link rel="prefetch" href="/library/assets/js/466.0fe07d43.js"><link rel="prefetch" href="/library/assets/js/467.3474df75.js"><link rel="prefetch" href="/library/assets/js/468.87e9d43b.js"><link rel="prefetch" href="/library/assets/js/469.14f6bac6.js"><link rel="prefetch" href="/library/assets/js/47.1d7410a3.js"><link rel="prefetch" href="/library/assets/js/470.cdfc6bf2.js"><link rel="prefetch" href="/library/assets/js/471.931bdb93.js"><link rel="prefetch" href="/library/assets/js/472.b7ca3965.js"><link rel="prefetch" href="/library/assets/js/473.8de90e3a.js"><link rel="prefetch" href="/library/assets/js/474.b1861fab.js"><link rel="prefetch" href="/library/assets/js/475.b2b57d8e.js"><link rel="prefetch" href="/library/assets/js/476.0c29d7eb.js"><link rel="prefetch" href="/library/assets/js/477.17744b20.js"><link rel="prefetch" href="/library/assets/js/478.6949eda4.js"><link rel="prefetch" href="/library/assets/js/479.f55db0f7.js"><link rel="prefetch" href="/library/assets/js/48.c192a4d9.js"><link rel="prefetch" href="/library/assets/js/480.f62d82ef.js"><link rel="prefetch" href="/library/assets/js/481.f2f638ef.js"><link rel="prefetch" href="/library/assets/js/482.6e1d57c0.js"><link rel="prefetch" href="/library/assets/js/483.012437f3.js"><link rel="prefetch" href="/library/assets/js/484.c8dc0fc6.js"><link rel="prefetch" href="/library/assets/js/485.3d336367.js"><link rel="prefetch" href="/library/assets/js/486.e91cfc4d.js"><link rel="prefetch" href="/library/assets/js/487.59426300.js"><link rel="prefetch" href="/library/assets/js/488.d51080f4.js"><link rel="prefetch" href="/library/assets/js/489.c74c3f59.js"><link rel="prefetch" href="/library/assets/js/49.f0e9a2af.js"><link rel="prefetch" href="/library/assets/js/490.49c4a971.js"><link rel="prefetch" href="/library/assets/js/491.6a95012d.js"><link rel="prefetch" href="/library/assets/js/492.76802d1a.js"><link rel="prefetch" href="/library/assets/js/493.cc613ea8.js"><link rel="prefetch" href="/library/assets/js/494.1011af98.js"><link rel="prefetch" href="/library/assets/js/495.b38dca4c.js"><link rel="prefetch" href="/library/assets/js/496.cf935cd5.js"><link rel="prefetch" href="/library/assets/js/497.675456a1.js"><link rel="prefetch" href="/library/assets/js/498.4f8ff166.js"><link rel="prefetch" href="/library/assets/js/499.c553e18c.js"><link rel="prefetch" href="/library/assets/js/5.278abd09.js"><link rel="prefetch" href="/library/assets/js/50.144ade08.js"><link rel="prefetch" href="/library/assets/js/500.414643c0.js"><link rel="prefetch" href="/library/assets/js/501.e166aee1.js"><link rel="prefetch" href="/library/assets/js/502.9e7813b2.js"><link rel="prefetch" href="/library/assets/js/503.db0a796f.js"><link rel="prefetch" href="/library/assets/js/504.f5e890dd.js"><link rel="prefetch" href="/library/assets/js/505.1ae0c546.js"><link rel="prefetch" href="/library/assets/js/506.203ee13c.js"><link rel="prefetch" href="/library/assets/js/507.216ea2f5.js"><link rel="prefetch" href="/library/assets/js/508.1402808e.js"><link rel="prefetch" href="/library/assets/js/509.80323f22.js"><link rel="prefetch" href="/library/assets/js/51.5c53c1fe.js"><link rel="prefetch" href="/library/assets/js/510.b5479839.js"><link rel="prefetch" href="/library/assets/js/511.cf9c2186.js"><link rel="prefetch" href="/library/assets/js/512.96d6d790.js"><link rel="prefetch" href="/library/assets/js/513.2da95bf5.js"><link rel="prefetch" href="/library/assets/js/514.9b8c4375.js"><link rel="prefetch" href="/library/assets/js/515.aa7b46dd.js"><link rel="prefetch" href="/library/assets/js/516.0720bbd6.js"><link rel="prefetch" href="/library/assets/js/517.3c4f393e.js"><link rel="prefetch" href="/library/assets/js/518.b44cd671.js"><link rel="prefetch" href="/library/assets/js/519.1b9a016f.js"><link rel="prefetch" href="/library/assets/js/52.dea2e79d.js"><link rel="prefetch" href="/library/assets/js/520.f480583b.js"><link rel="prefetch" href="/library/assets/js/521.fbe7f198.js"><link rel="prefetch" href="/library/assets/js/522.6f0a538f.js"><link rel="prefetch" href="/library/assets/js/523.729b7076.js"><link rel="prefetch" href="/library/assets/js/524.3f9635f6.js"><link rel="prefetch" href="/library/assets/js/525.041361a6.js"><link rel="prefetch" href="/library/assets/js/526.0854ba23.js"><link rel="prefetch" href="/library/assets/js/527.e59029c9.js"><link rel="prefetch" href="/library/assets/js/528.c2bbf1a1.js"><link rel="prefetch" href="/library/assets/js/529.b6e7110d.js"><link rel="prefetch" href="/library/assets/js/53.db96e923.js"><link rel="prefetch" href="/library/assets/js/530.9eb055b0.js"><link rel="prefetch" href="/library/assets/js/531.d0f1a7c0.js"><link rel="prefetch" href="/library/assets/js/532.18298762.js"><link rel="prefetch" href="/library/assets/js/533.cffb0aa5.js"><link rel="prefetch" href="/library/assets/js/534.e9bd426a.js"><link rel="prefetch" href="/library/assets/js/535.5e7e96df.js"><link rel="prefetch" href="/library/assets/js/536.ba9e0c7a.js"><link rel="prefetch" href="/library/assets/js/537.f6687bd0.js"><link rel="prefetch" href="/library/assets/js/538.dc48188c.js"><link rel="prefetch" href="/library/assets/js/539.44e4c36b.js"><link rel="prefetch" href="/library/assets/js/54.cbacd3a2.js"><link rel="prefetch" href="/library/assets/js/540.9f1e52a5.js"><link rel="prefetch" href="/library/assets/js/541.76291485.js"><link rel="prefetch" href="/library/assets/js/542.5abc1537.js"><link rel="prefetch" href="/library/assets/js/543.fa6f9620.js"><link rel="prefetch" href="/library/assets/js/544.b82dc2d7.js"><link rel="prefetch" href="/library/assets/js/545.b91b9816.js"><link rel="prefetch" href="/library/assets/js/546.28caa743.js"><link rel="prefetch" href="/library/assets/js/547.4d7d0ae1.js"><link rel="prefetch" href="/library/assets/js/548.7e7ec954.js"><link rel="prefetch" href="/library/assets/js/549.2c9ccd62.js"><link rel="prefetch" href="/library/assets/js/55.eeef9b4d.js"><link rel="prefetch" href="/library/assets/js/550.7176daea.js"><link rel="prefetch" href="/library/assets/js/551.e477d554.js"><link rel="prefetch" href="/library/assets/js/56.7fd9ff22.js"><link rel="prefetch" href="/library/assets/js/57.fa57e1d4.js"><link rel="prefetch" href="/library/assets/js/58.49dcc97f.js"><link rel="prefetch" href="/library/assets/js/59.d9a22ab0.js"><link rel="prefetch" href="/library/assets/js/6.fc6efdb2.js"><link rel="prefetch" href="/library/assets/js/60.c1d7031f.js"><link rel="prefetch" href="/library/assets/js/61.432798df.js"><link rel="prefetch" href="/library/assets/js/62.caf787e7.js"><link rel="prefetch" href="/library/assets/js/63.a327a55e.js"><link rel="prefetch" href="/library/assets/js/64.ae329299.js"><link rel="prefetch" href="/library/assets/js/65.0f2f2389.js"><link rel="prefetch" href="/library/assets/js/66.867ef958.js"><link rel="prefetch" href="/library/assets/js/67.c3305bfd.js"><link rel="prefetch" href="/library/assets/js/68.803f352c.js"><link rel="prefetch" href="/library/assets/js/69.0222358f.js"><link rel="prefetch" href="/library/assets/js/7.ee4e09a5.js"><link rel="prefetch" href="/library/assets/js/70.62e99fc0.js"><link rel="prefetch" href="/library/assets/js/71.dbbde38d.js"><link rel="prefetch" href="/library/assets/js/72.7dbb5a49.js"><link rel="prefetch" href="/library/assets/js/73.b8f23b53.js"><link rel="prefetch" href="/library/assets/js/74.5026076f.js"><link rel="prefetch" href="/library/assets/js/75.725ec221.js"><link rel="prefetch" href="/library/assets/js/76.21d07e83.js"><link rel="prefetch" href="/library/assets/js/77.c30e9f85.js"><link rel="prefetch" href="/library/assets/js/78.b83dfc05.js"><link rel="prefetch" href="/library/assets/js/79.548bf725.js"><link rel="prefetch" href="/library/assets/js/8.305257ac.js"><link rel="prefetch" href="/library/assets/js/80.3b06ca7b.js"><link rel="prefetch" href="/library/assets/js/81.2ed710b8.js"><link rel="prefetch" href="/library/assets/js/82.7eaa961e.js"><link rel="prefetch" href="/library/assets/js/83.79c3119a.js"><link rel="prefetch" href="/library/assets/js/84.162d1793.js"><link rel="prefetch" href="/library/assets/js/85.b79ca893.js"><link rel="prefetch" href="/library/assets/js/86.0f93f99c.js"><link rel="prefetch" href="/library/assets/js/87.4b2e3a86.js"><link rel="prefetch" href="/library/assets/js/88.c0fef91a.js"><link rel="prefetch" href="/library/assets/js/89.d41507fd.js"><link rel="prefetch" href="/library/assets/js/9.1f1aa443.js"><link rel="prefetch" href="/library/assets/js/90.29248c41.js"><link rel="prefetch" href="/library/assets/js/91.5a34dfe6.js"><link rel="prefetch" href="/library/assets/js/92.fcba74b0.js"><link rel="prefetch" href="/library/assets/js/93.9a4331e0.js"><link rel="prefetch" href="/library/assets/js/94.55c05fad.js"><link rel="prefetch" href="/library/assets/js/95.130ceaad.js"><link rel="prefetch" href="/library/assets/js/96.075b6c96.js"><link rel="prefetch" href="/library/assets/js/97.7f9c12ef.js"><link rel="prefetch" href="/library/assets/js/98.96cb088f.js"><link rel="prefetch" href="/library/assets/js/99.8d6de1cd.js">
    <link rel="stylesheet" href="/library/assets/css/0.styles.df80320a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/library/" class="home-link router-link-active"><!----> <span class="site-name">余鸿靖的手册小站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="手册" class="dropdown-title"><span class="title">手册</span> <span class="arrow down"></span></button> <button type="button" aria-label="手册" class="mobile-dropdown-title"><span class="title">手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/notebook/school/read.html" class="nav-link">
  校招面经
</a></li><li class="dropdown-item"><!----> <a href="/library/notebook/jsTricks/read.html" class="nav-link">
  JS Tricks
</a></li><li class="dropdown-item"><!----> <a href="/library/notebook/cssTricks/read.html" class="nav-link">
  CSS Tricks
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常记录" class="dropdown-title"><span class="title">日常记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="日常记录" class="mobile-dropdown-title"><span class="title">日常记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/blog/article/read.html" class="nav-link">
  闲情随记
</a></li><li class="dropdown-item"><!----> <a href="/library/blog/tools/read.html" class="nav-link">
  工具技巧
</a></li><li class="dropdown-item"><!----> <a href="/library/blog/command/read.html" class="nav-link">
  命令整理
</a></li><li class="dropdown-item"><!----> <a href="/library/blog/software/read.html" class="nav-link">
  必备软件
</a></li><li class="dropdown-item"><!----> <a href="/library/blog/other/read.html" class="nav-link">
  文档综合
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识整理" class="dropdown-title"><span class="title">知识整理</span> <span class="arrow down"></span></button> <button type="button" aria-label="知识整理" class="mobile-dropdown-title"><span class="title">知识整理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/knowledge/mindmap/read.html" class="nav-link">
  知识脑图
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/web/read.html" class="nav-link">
  前端知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/hybrid/read.html" class="nav-link">
  跨端知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/android/read.html" class="nav-link">
  Android知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/ios/read.html" class="nav-link">
  IOS知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/backend/read.html" class="nav-link">
  后端知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/database/read.html" class="nav-link">
  数据库知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/algorithm/read.html" class="nav-link">
  算法知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/structure/read.html" class="nav-link">
  数据结构知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/design/read.html" class="nav-link">
  设计模式知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/network/read.html" class="nav-link">
  网络知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/hard/read.html" class="nav-link">
  硬件知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/soft/read.html" class="nav-link">
  软件工程知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/system/read.html" class="nav-link">
  操作系统知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/config/read.html" class="nav-link">
  环境配置
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/architecture/read.html" class="nav-link">
  工程架构
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/project/read.html" class="nav-link">
  项目管理
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/english/read.html" class="nav-link">
  英语知识
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码" class="dropdown-title"><span class="title">源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码" class="mobile-dropdown-title"><span class="title">源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/source/debugger/read.html" class="nav-link">
  调试
</a></li><li class="dropdown-item"><!----> <a href="/library/source/tool/read.html" class="nav-link">
  工具库
</a></li><li class="dropdown-item"><!----> <a href="/library/source/class/read.html" class="nav-link">
  类库
</a></li><li class="dropdown-item"><!----> <a href="/library/source/frame/read.html" class="nav-link">
  框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读" class="mobile-dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/readbook/technology/read.html" class="nav-link">
  技术书籍
</a></li><li class="dropdown-item"><!----> <a href="/library/readbook/other/read.html" class="nav-link">
  其他书籍
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友链" class="dropdown-title"><span class="title">友链</span> <span class="arrow down"></span></button> <button type="button" aria-label="友链" class="mobile-dropdown-title"><span class="title">友链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://pxy1996.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小裕博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://yuhongjing.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  旧博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/yuhongjing/library" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="手册" class="dropdown-title"><span class="title">手册</span> <span class="arrow down"></span></button> <button type="button" aria-label="手册" class="mobile-dropdown-title"><span class="title">手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/notebook/school/read.html" class="nav-link">
  校招面经
</a></li><li class="dropdown-item"><!----> <a href="/library/notebook/jsTricks/read.html" class="nav-link">
  JS Tricks
</a></li><li class="dropdown-item"><!----> <a href="/library/notebook/cssTricks/read.html" class="nav-link">
  CSS Tricks
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常记录" class="dropdown-title"><span class="title">日常记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="日常记录" class="mobile-dropdown-title"><span class="title">日常记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/blog/article/read.html" class="nav-link">
  闲情随记
</a></li><li class="dropdown-item"><!----> <a href="/library/blog/tools/read.html" class="nav-link">
  工具技巧
</a></li><li class="dropdown-item"><!----> <a href="/library/blog/command/read.html" class="nav-link">
  命令整理
</a></li><li class="dropdown-item"><!----> <a href="/library/blog/software/read.html" class="nav-link">
  必备软件
</a></li><li class="dropdown-item"><!----> <a href="/library/blog/other/read.html" class="nav-link">
  文档综合
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识整理" class="dropdown-title"><span class="title">知识整理</span> <span class="arrow down"></span></button> <button type="button" aria-label="知识整理" class="mobile-dropdown-title"><span class="title">知识整理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/knowledge/mindmap/read.html" class="nav-link">
  知识脑图
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/web/read.html" class="nav-link">
  前端知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/hybrid/read.html" class="nav-link">
  跨端知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/android/read.html" class="nav-link">
  Android知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/ios/read.html" class="nav-link">
  IOS知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/backend/read.html" class="nav-link">
  后端知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/database/read.html" class="nav-link">
  数据库知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/algorithm/read.html" class="nav-link">
  算法知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/structure/read.html" class="nav-link">
  数据结构知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/design/read.html" class="nav-link">
  设计模式知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/network/read.html" class="nav-link">
  网络知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/hard/read.html" class="nav-link">
  硬件知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/soft/read.html" class="nav-link">
  软件工程知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/system/read.html" class="nav-link">
  操作系统知识
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/config/read.html" class="nav-link">
  环境配置
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/architecture/read.html" class="nav-link">
  工程架构
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/project/read.html" class="nav-link">
  项目管理
</a></li><li class="dropdown-item"><!----> <a href="/library/knowledge/english/read.html" class="nav-link">
  英语知识
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码" class="dropdown-title"><span class="title">源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码" class="mobile-dropdown-title"><span class="title">源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/source/debugger/read.html" class="nav-link">
  调试
</a></li><li class="dropdown-item"><!----> <a href="/library/source/tool/read.html" class="nav-link">
  工具库
</a></li><li class="dropdown-item"><!----> <a href="/library/source/class/read.html" class="nav-link">
  类库
</a></li><li class="dropdown-item"><!----> <a href="/library/source/frame/read.html" class="nav-link">
  框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读" class="mobile-dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/library/readbook/technology/read.html" class="nav-link">
  技术书籍
</a></li><li class="dropdown-item"><!----> <a href="/library/readbook/other/read.html" class="nav-link">
  其他书籍
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友链" class="dropdown-title"><span class="title">友链</span> <span class="arrow down"></span></button> <button type="button" aria-label="友链" class="mobile-dropdown-title"><span class="title">友链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://pxy1996.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小裕博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://yuhongjing.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  旧博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/yuhongjing/library" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/library/knowledge/web/read.html" class="sidebar-link">介绍</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/library/knowledge/web/javascript/read.html" class="sidebar-link">介绍</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>基础概念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ECMAScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>正则表达式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>函数式编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>编写规范</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/library/knowledge/web/javascript/编写规范/read.html" class="sidebar-link">介绍</a></li><li><a href="/library/knowledge/web/javascript/编写规范/代码注释.html" class="sidebar-link">代码注释</a></li><li><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html" class="active sidebar-link">clean-code-javascript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#变量" class="sidebar-link">变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#使用有意义的变量名" class="sidebar-link">使用有意义的变量名</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#相同类型的变量-使用相同的词汇表" class="sidebar-link">相同类型的变量，使用相同的词汇表</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#使用易搜索的变量名" class="sidebar-link">使用易搜索的变量名</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#使用解释性的变量" class="sidebar-link">使用解释性的变量</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#避免使用无意义的映射变量名" class="sidebar-link">避免使用无意义的映射变量名</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#避免添加不必要的上下文" class="sidebar-link">避免添加不必要的上下文</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#使用默认参数值来代替短路或条件判断" class="sidebar-link">使用默认参数值来代替短路或条件判断</a></li></ul></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#函数参数应不超过2个" class="sidebar-link">函数参数应不超过2个</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#函数符合单一原则" class="sidebar-link">函数符合单一原则</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#函数命名应该突显出它的功能" class="sidebar-link">函数命名应该突显出它的功能</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#保持函数只有一层抽象" class="sidebar-link">保持函数只有一层抽象</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#避免冗余代码" class="sidebar-link">避免冗余代码</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#使用object-assign设置对象" class="sidebar-link">使用Object.assign设置对象</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#不要用标志位作为函数参数" class="sidebar-link">不要用标志位作为函数参数</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#避免副作用-part-1" class="sidebar-link">避免副作用(part 1)</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#避免副作用-part-2" class="sidebar-link">避免副作用(part 2)</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#不要写全局函数" class="sidebar-link">不要写全局函数</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#函数编程优于指令式编程" class="sidebar-link">函数编程优于指令式编程</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#封装条件语句" class="sidebar-link">封装条件语句</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#避免否定情况的判断" class="sidebar-link">避免否定情况的判断</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#避免switch-case" class="sidebar-link">避免switch case</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#避免类型检测-part-1" class="sidebar-link">避免类型检测(part 1)</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#不要过度优化" class="sidebar-link">不要过度优化</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#移出僵尸代码" class="sidebar-link">移出僵尸代码</a></li></ul></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#对象和数据结构" class="sidebar-link">对象和数据结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#使用getters和setters" class="sidebar-link">使用getters和setters</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#让对象拥有私有成员" class="sidebar-link">让对象拥有私有成员</a></li></ul></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#类" class="sidebar-link">类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#es2015-es6类优先与es5纯函数" class="sidebar-link">ES2015/ES6类优先与ES5纯函数</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#使用方法链" class="sidebar-link">使用方法链</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#组合优先于继承" class="sidebar-link">组合优先于继承</a></li></ul></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#健壮性" class="sidebar-link">健壮性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#单一职责原则-srp" class="sidebar-link">单一职责原则(SRP)</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#开闭原则-ocp" class="sidebar-link">开闭原则(OCP)</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#liskov替换原则-lsp" class="sidebar-link">Liskov替换原则(LSP)</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#接口隔离原则-isp" class="sidebar-link">接口隔离原则(ISP)</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#依赖反转原则-dip" class="sidebar-link">依赖反转原则(DIP)</a></li></ul></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#并发性" class="sidebar-link">并发性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#使用promises而不是callback" class="sidebar-link">使用Promises而不是callback</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#async-await比promises更加简洁" class="sidebar-link">Async/Await比Promises更加简洁</a></li></ul></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#容错性" class="sidebar-link">容错性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#不要忽略捕捉错误" class="sidebar-link">不要忽略捕捉错误</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#不要忽略被拒绝的promise" class="sidebar-link">不要忽略被拒绝的promise</a></li></ul></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#格式化" class="sidebar-link">格式化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#保持大小写一致" class="sidebar-link">保持大小写一致</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#函数的调用方与被调用方应该靠近" class="sidebar-link">函数的调用方与被调用方应该靠近</a></li></ul></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#注释" class="sidebar-link">注释</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#仅仅对包含复杂业务逻辑的代码进行注释" class="sidebar-link">仅仅对包含复杂业务逻辑的代码进行注释</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#不要在代码库中保存注释掉的代码" class="sidebar-link">不要在代码库中保存注释掉的代码</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#不要有日志式的评论" class="sidebar-link">不要有日志式的评论</a></li><li class="sidebar-sub-header"><a href="/library/knowledge/web/javascript/编写规范/clean-code-javascript.html#避免不必要的占位符" class="sidebar-link">避免不必要的占位符</a></li></ul></li></ul></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="clean-code-javascript"><a href="#clean-code-javascript" class="header-anchor">#</a> clean-code-javascript</h1> <p>关于书写整洁JS代码的风格指南。</p> <ul><li><a href="#%E5%8F%98%E9%87%8F">变量</a></li> <li><a href="#%E5%87%BD%E6%95%B0">函数</a></li> <li><a href="#%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">对象和数据结构</a></li> <li><a href="#%E7%B1%BB">类</a></li> <li><a href="#%E5%81%A5%E5%A3%AE%E6%80%A7">健壮性</a></li> <li><a href="#%E5%B9%B6%E5%8F%91%E6%80%A7">并发性</a></li> <li><a href="#%E5%AE%B9%E9%94%99%E6%80%A7">容错性</a></li> <li><a href="#%E6%A0%BC%E5%BC%8F%E5%8C%96">格式化</a></li> <li><a href="#%E6%B3%A8%E9%87%8A">注释</a></li></ul> <h2 id="变量"><a href="#变量" class="header-anchor">#</a> 变量</h2> <h3 id="使用有意义的变量名"><a href="#使用有意义的变量名" class="header-anchor">#</a> 使用有意义的变量名</h3> <p>见名知意。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> yyyymmdstr <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;YYYY/MM/DD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">const</span> currentDate <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;YYYY/MM/DD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="相同类型的变量-使用相同的词汇表"><a href="#相同类型的变量-使用相同的词汇表" class="header-anchor">#</a> 相同类型的变量，使用相同的词汇表</h3> <p>例如，获取用户信息命名为getUser即可。而不是a文件中为getUserInfo，b文件中为getUserData。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="使用易搜索的变量名"><a href="#使用易搜索的变量名" class="header-anchor">#</a> 使用易搜索的变量名</h3> <p>我们读代码的时间是多于写代码的时间，因此我们编写的代码的可读性和可搜索性是非常重要的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>blastOff<span class="token punctuation">,</span> <span class="token number">86400000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 读者不明白 86400000 是什么意思</span>

<span class="token comment">// Good</span>
<span class="token comment">// 声明为大写的常量</span>
<span class="token keyword">const</span> <span class="token constant">MILLISECONDS_IN_A_DAY</span> <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span> <span class="token comment">// 86400000</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span>blastOff<span class="token punctuation">,</span> <span class="token constant">MILLISECONDS_IN_A_DAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="使用解释性的变量"><a href="#使用解释性的变量" class="header-anchor">#</a> 使用解释性的变量</h3> <p>使用解释性的中转变量，能够清晰的表示代码的意图。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> address <span class="token operator">=</span> <span class="token string">&quot;One Infinite Loop, Cupertino 95014&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cityZipCodeRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^,\\]+[,\\\s]+(.+?)\s*(\d{5})?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token comment">// 读者不清楚，这两个参数是什么？</span>
<span class="token function">saveCityZipCode</span><span class="token punctuation">(</span>
  address<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>cityZipCodeRegex<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  address<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>cityZipCodeRegex<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">const</span> address <span class="token operator">=</span> <span class="token string">&quot;One Infinite Loop, Cupertino 95014&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cityZipCodeRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^,\\]+[,\\\s]+(.+?)\s*(\d{5})?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token comment">// 使用解释性的中转参数，表明传递了城市和邮编。</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>_<span class="token punctuation">,</span> city<span class="token punctuation">,</span> zipCode<span class="token punctuation">]</span> <span class="token operator">=</span> address<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>cityZipCodeRegex<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">saveCityZipCode</span><span class="token punctuation">(</span>city<span class="token punctuation">,</span> zipCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="避免使用无意义的映射变量名"><a href="#避免使用无意义的映射变量名" class="header-anchor">#</a> 避免使用无意义的映射变量名</h3> <p>映射变量名也得有意义。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> locations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Austin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;San Francisco&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
locations<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">l</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">doStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">doSomeOtherStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// 读者不明白l指代什么</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">const</span> locations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Austin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;San Francisco&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
locations<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">location</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">doStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">doSomeOtherStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="避免添加不必要的上下文"><a href="#避免添加不必要的上下文" class="header-anchor">#</a> 避免添加不必要的上下文</h3> <p>类/对象的属性，不必重复添加类/对象前缀名。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> Car <span class="token operator">=</span> <span class="token punctuation">{</span>
  carMake<span class="token operator">:</span> <span class="token string">&quot;Honda&quot;</span><span class="token punctuation">,</span>
  carModel<span class="token operator">:</span> <span class="token string">&quot;Accord&quot;</span><span class="token punctuation">,</span>
  carColor<span class="token operator">:</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">paintCar</span><span class="token punctuation">(</span><span class="token parameter">car</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// carColor 添加了前缀名，就很奇怪</span>
  car<span class="token punctuation">.</span>carColor <span class="token operator">=</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">const</span> Car <span class="token operator">=</span> <span class="token punctuation">{</span>
  carMake<span class="token operator">:</span> <span class="token string">&quot;Honda&quot;</span><span class="token punctuation">,</span>
  carModel<span class="token operator">:</span> <span class="token string">&quot;Accord&quot;</span><span class="token punctuation">,</span>
  carColor<span class="token operator">:</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">paintCar</span><span class="token punctuation">(</span><span class="token parameter">car</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  car<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用默认参数值来代替短路或条件判断"><a href="#使用默认参数值来代替短路或条件判断" class="header-anchor">#</a> 使用默认参数值来代替短路或条件判断</h3> <p>ES6标配，不再赘述。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">createMicrobrewery</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> breweryName <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">&quot;Hipster Brew Co.&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">createMicrobrewery</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;Hipster Brew Co.&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <h3 id="函数参数应不超过2个"><a href="#函数参数应不超过2个" class="header-anchor">#</a> 函数参数应不超过2个</h3> <p>限制函数参数的数量非常重要，因为可以更容易的测试函数，超过三个会导致组合爆炸，测试的情况会大大增加。</p> <p>因为JS允许动态创建对象，因此不需要大量的类样板文件，所以如果你发现自己需要很多参数，可以使用对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">createMenu</span><span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> body<span class="token punctuation">,</span> buttonText<span class="token punctuation">,</span> cancellabel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token function">createMenu</span><span class="token punctuation">(</span><span class="token string">&quot;Foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Baz&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">createMenu</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>title<span class="token punctuation">,</span> body<span class="token punctuation">,</span> buttonText<span class="token punctuation">,</span> cancellabel<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token function">createMenu</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">,</span>
  buttonText<span class="token operator">:</span> <span class="token string">&quot;Baz&quot;</span><span class="token punctuation">,</span>
  cancellabel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="函数符合单一原则"><a href="#函数符合单一原则" class="header-anchor">#</a> 函数符合单一原则</h3> <p>这是软件工程中重要的原则之一，当函数负责多个功能时，就很难进行组合、测试和推理。因此函数只负责单一功能时，会更容易重构它，代码读着也会更清晰。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">emailClients</span><span class="token punctuation">(</span><span class="token parameter">clients</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  clients<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">client</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> clientRecord <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>clientRecord<span class="token punctuation">.</span><span class="token function">isActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">email</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">emailActiveClients</span><span class="token punctuation">(</span><span class="token parameter">clients</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  clients<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isActiveClient<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isActiveClient</span><span class="token punctuation">(</span><span class="token parameter">client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> clientRecord <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> clientRecord<span class="token punctuation">.</span><span class="token function">isActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="函数命名应该突显出它的功能"><a href="#函数命名应该突显出它的功能" class="header-anchor">#</a> 函数命名应该突显出它的功能</h3> <p>见名知意。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">addToDate</span><span class="token punctuation">(</span><span class="token parameter">date<span class="token punctuation">,</span> month</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 仅从函数名，不知道到底加的什么东西</span>
<span class="token function">addToDate</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">addMonthToDate</span><span class="token punctuation">(</span><span class="token parameter">month<span class="token punctuation">,</span> date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">addMonthToDate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="保持函数只有一层抽象"><a href="#保持函数只有一层抽象" class="header-anchor">#</a> 保持函数只有一层抽象</h3> <p>当函数中有多于一个抽象级别时，你的函数通常做了太多事情。拆分函数将会提升重用性和测试性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">parseBetterJSAlternative</span><span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">REGEXES</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> statements <span class="token operator">=</span> code<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> tokens <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token constant">REGEXES</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">REGEX</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    statements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">statement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> ast <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  tokens<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// lex...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  ast<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// parse...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">REGEXES</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> statements <span class="token operator">=</span> code<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> tokens <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token constant">REGEXES</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">REGEX</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    statements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">statement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      tokens<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> token<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">lexer</span><span class="token punctuation">(</span><span class="token parameter">tokens</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ast <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  tokens<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ast<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> ast<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">parseBetterJSAlternative</span><span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> tokens <span class="token operator">=</span> <span class="token function">tokenize</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ast <span class="token operator">=</span> <span class="token function">lexer</span><span class="token punctuation">(</span>tokens<span class="token punctuation">)</span><span class="token punctuation">;</span>
  ast<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// parse ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="避免冗余代码"><a href="#避免冗余代码" class="header-anchor">#</a> 避免冗余代码</h3> <p>竭尽全力避免冗余代码。因为它意味着当你需要修改一些逻辑时会有多个地方需要修改。</p> <p>想象一下你在经营一家餐馆，你需要记录所有的库存西红柿、洋葱、大蒜、各种香料等等。如果你有多个记录列表，当你用西红柿做一道菜时，你得更新多个列表。如果你只有一个列表，就只有一个地方需要更新！</p> <p>冗余代码通常是因为有两个或多个稍微不同的东西，它们共享大部分，但是它们的不同之处迫使你使用两个或更多独立的函数来处理大部分相同的东西，移出冗余代码意味着创建一个可以处理这些不同之处的抽象的函数/模块/类。</p> <p>合理抽象很重要，这是为什么要你遵循Classes的SOLID的原因。不好的抽象比冗余代码更差，所以要谨慎行事。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">showDeveloperList</span><span class="token punctuation">(</span><span class="token parameter">developers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  developers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">developer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> expectedSalary <span class="token operator">=</span> developer<span class="token punctuation">.</span><span class="token function">calculateExpectedSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> experience <span class="token operator">=</span> developer<span class="token punctuation">.</span><span class="token function">getExperience</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> githubLink <span class="token operator">=</span> developer<span class="token punctuation">.</span><span class="token function">getGithubLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
      expectedSalary<span class="token punctuation">,</span>
      experience<span class="token punctuation">,</span>
      githubLink<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">showManagerList</span><span class="token punctuation">(</span><span class="token parameter">managers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  managers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">manager</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> expectedSalary <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">calculateExpectedSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> experience <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getExperience</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> portfolio <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getMBAProjects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
      expectedSalary<span class="token punctuation">,</span>
      experience<span class="token punctuation">,</span>
      portfolio<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">showEmployeeList</span><span class="token punctuation">(</span><span class="token parameter">employees</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  employees<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">employee</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> expectedSalary <span class="token operator">=</span> employee<span class="token punctuation">.</span><span class="token function">calculateExpectedSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> experience <span class="token operator">=</span> employee<span class="token punctuation">.</span><span class="token function">getExperience</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> portfolio <span class="token operator">=</span> employee<span class="token punctuation">.</span><span class="token function">getGithubLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>employee<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'manager'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      portfolio <span class="token operator">=</span> employee<span class="token punctuation">.</span><span class="token function">getMBAProjects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
      expectedSalary<span class="token punctuation">,</span>
      experience<span class="token punctuation">,</span>
      portfolio<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用object-assign设置对象"><a href="#使用object-assign设置对象" class="header-anchor">#</a> 使用Object.assign设置对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> menuConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">,</span>
  buttonText<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  cancellabel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">createMenu</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span>title <span class="token operator">=</span> config<span class="token punctuation">.</span>title <span class="token operator">||</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span>body <span class="token operator">=</span> config<span class="token punctuation">.</span>body <span class="token operator">||</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span>buttonText <span class="token operator">=</span> config<span class="token punctuation">.</span>buttonText <span class="token operator">||</span> <span class="token string">&quot;Baz&quot;</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span>cancellabel <span class="token operator">=</span> config<span class="token punctuation">.</span>cancellabel <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> config<span class="token punctuation">.</span>cancellabel <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">createMenu</span><span class="token punctuation">(</span>menuConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">const</span> menuConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&quot;Order&quot;</span><span class="token punctuation">,</span>
  buttonText<span class="token operator">:</span> <span class="token string">&quot;Send&quot;</span><span class="token punctuation">,</span>
  cancellabel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">createMenu</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> finalConfig <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">,</span>
    buttonText<span class="token operator">:</span> <span class="token string">&quot;Baz&quot;</span><span class="token punctuation">,</span>
    cancellabel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> finalConfig<span class="token punctuation">;</span>
  <span class="token comment">// Config值为: {title: &quot;Order&quot;, body: &quot;Bar&quot;, buttonText: &quot;Send&quot;, cancellabel: true}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="不要用标志位作为函数参数"><a href="#不要用标志位作为函数参数" class="header-anchor">#</a> 不要用标志位作为函数参数</h3> <p>这通常意味着函数的功能的单一性已经被破坏。此时应考虑对函数进行再次划分。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">createFile</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> temp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./temp/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">createFile</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fs<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">careteTempFile</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">crateFile</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./temp/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="避免副作用-part-1"><a href="#避免副作用-part-1" class="header-anchor">#</a> 避免副作用(part 1)</h3> <p>当函数产生了除了&quot;接受一个值并返回一个结果&quot;之外的行为时，称该函数产生了副作用。比如写文件、修改全局变量或将你的钱全转给了一个陌生人等。</p> <p>程序在某些情况下确实需要副作用这一行为，如先前例子中的写文件。这时应该将这些功能集中在一起，不要用多个函数/类修改某个文件。用且只用与一个service完成这一需求。</p> <p>重点是避免这些常见的易犯的错误，比如在对象之间共享状态而不使用任何结构，使用任何地方都可以写入的可变的数据类型，没有集中化导致副作用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token comment">// 全局变量name被函数引用，当其他位置使用name时，值已被修改为数组。</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'Ryan McDermott'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">splitIntoFirstAndLastName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">splitIntoFirstAndLastName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['Ryan', 'McDermott'];</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">splitInfoFirstAndLastName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'Ryan McDermott'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newName <span class="token operator">=</span> <span class="token function">splitIntoFirstAndLastName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Ryan McDermott';</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['Ryan', 'McDermott'];</span>
</code></pre></div><h3 id="避免副作用-part-2"><a href="#避免副作用-part-2" class="header-anchor">#</a> 避免副作用(part 2)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> <span class="token function-variable function">addItemToCart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">cart<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  cart<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>item<span class="token punctuation">,</span> date<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">const</span> <span class="token function-variable function">addItemToCart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">cart<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>cart<span class="token punctuation">,</span> <span class="token punctuation">{</span>item<span class="token punctuation">,</span> date<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="不要写全局函数"><a href="#不要写全局函数" class="header-anchor">#</a> 不要写全局函数</h3> <p>在JS中污染全局是一个非常不好的实践，这么做可能和其他库起冲突，且调用你的API的用户在实际环境中得到一个exception前对这一情况是一无所知的。</p> <p>想象一下例子：如果你想扩展JS中的Array，为其添加一个diff函数显示两个数组间的差异，此时应如何去做？你可以将diff写入Array.prototype，但这么做会和其他有类似需求的库造成冲突。如果另一个库对diff的需求为比较一个数组中首尾元素间的差异呢？</p> <p>使用ES6中的class对全局的Array做简单的扩展显然是一个更棒的选择。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">diff</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">diff</span><span class="token punctuation">(</span><span class="token parameter">comparisonArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>comparisonArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">elem</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>hash<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">SuperArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  <span class="token function">diff</span><span class="token punctuation">(</span><span class="token parameter">comparisonArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>comparisonArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">elem</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>hash<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="函数编程优于指令式编程"><a href="#函数编程优于指令式编程" class="header-anchor">#</a> 函数编程优于指令式编程</h3> <p>JavaScript不是Haskell方式的函数式语言，但是它有它的函数式风格。函数式语言更加简洁并且更容易进行测试。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> programmerOutput <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Uncle Bobby'</span><span class="token punctuation">,</span>
    linesOfCode<span class="token operator">:</span> <span class="token number">500</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Suzie Q'</span><span class="token punctuation">,</span>
    linesOfCode<span class="token operator">:</span> <span class="token number">15000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Jimmy Gosling'</span><span class="token punctuation">,</span>
    linesOfCode<span class="token operator">:</span> <span class="token number">150</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Gracie Hopper'</span><span class="token punctuation">,</span>
    linesOfCode<span class="token operator">:</span> <span class="token number">1000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> totalOutput <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> programmerOutput<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  totalOutput <span class="token operator">+=</span> programmerOutput<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>linesOfCode<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">const</span> programmerOutput <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Uncle Bobby'</span><span class="token punctuation">,</span>
    linesOfCode<span class="token operator">:</span> <span class="token number">500</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Suzie Q'</span><span class="token punctuation">,</span>
    linesOfCode<span class="token operator">:</span> <span class="token number">1500</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Jimmy Gosling'</span><span class="token punctuation">,</span>
    linesOfCode<span class="token operator">:</span> <span class="token number">150</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Gracie Hopper'</span><span class="token punctuation">,</span>
    linesOfCode<span class="token operator">:</span> <span class="token number">1000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">INITIAL_VALUE</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> totalOutput <span class="token operator">=</span> programmerOutput
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">programmer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> programmer<span class="token punctuation">.</span>linesOfCode<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> linesOfCode</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> linesOfCode<span class="token punctuation">,</span> <span class="token constant">INITIAL_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="封装条件语句"><a href="#封装条件语句" class="header-anchor">#</a> 封装条件语句</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>fsm<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">'fetching'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span>listNode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">shouldShowSpinner</span><span class="token punctuation">(</span><span class="token parameter">fsm<span class="token punctuation">,</span> listNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> fsm<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">'fetching'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span>listNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">shouldShowSpinner</span><span class="token punctuation">(</span>fsmInstance<span class="token punctuation">,</span> listNodeInstance<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="避免否定情况的判断"><a href="#避免否定情况的判断" class="header-anchor">#</a> 避免否定情况的判断</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">isDOMNodeNotPresent</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">isDOMNodePresent</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDOMNodePresent</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="避免switch-case"><a href="#避免switch-case" class="header-anchor">#</a> 避免switch case</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">class</span> <span class="token class-name">Airplane</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">getCruisingAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'777'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMaxAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPassengerCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'Air Force One'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMaxAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'Cessna'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMaxAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFuelExpenditure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">Airplane</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Boeing777</span> <span class="token keyword">extends</span> <span class="token class-name">Airplane</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">getCruisingAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMaxAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPassengerCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AirForceOne</span> <span class="token keyword">extends</span> <span class="token class-name">Airplane</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">getCruisingAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMaxAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Cessna</span> extendsAirplane <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">getCruisingAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMaxAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFuelExpenditure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="避免类型检测-part-1"><a href="#避免类型检测-part-1" class="header-anchor">#</a> 避免类型检测(part 1)</h3> <p>JavaScript是无类型的，这意味着你的函数能接受任何类型的参数。但是有时又会被这种自由咬伤，于是又尝试在你的函数中做类型检查。有很多种方式来避免这个问题，第一个要考虑的是一致的API。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">travelToTexas</span><span class="token punctuation">(</span><span class="token parameter">vehicle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>vehicle <span class="token keyword">instanceof</span> <span class="token class-name">Bicycle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    vehicle<span class="token punctuation">.</span><span class="token function">pedal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentLocation<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Location</span><span class="token punctuation">(</span><span class="token string">'texas'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>vehicle <span class="token keyword">instanceof</span> <span class="token class-name">Car</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    vehicle<span class="token punctuation">.</span><span class="token function">drive</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentLocation<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Location</span><span class="token punctuation">(</span><span class="token string">'texas'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">travelToTexas</span><span class="token punctuation">(</span><span class="token parameter">vehicle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vehicle<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentLocation<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Location</span><span class="token punctuation">(</span><span class="token string">'texas'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="不要过度优化"><a href="#不要过度优化" class="header-anchor">#</a> 不要过度优化</h3> <p>有些优化对于执行环境来说(浏览器等)根本不值一提，花时间在值得优化的地方。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token comment">// 这里使用变量len是因为在老式浏览器中</span>
<span class="token comment">// 现代浏览器会自动完成优化</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="移出僵尸代码"><a href="#移出僵尸代码" class="header-anchor">#</a> 移出僵尸代码</h3> <p>僵尸代码和冗余代码同样糟糕，不需要时就删掉它。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">oldRequestModule</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">newRequestModule</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> req <span class="token operator">=</span> newRequestModule<span class="token punctuation">;</span>
<span class="token function">inventoryTracker</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> req<span class="token punctuation">,</span> <span class="token string">'www.inventory-awesome.io'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">newRequestModule</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> req <span class="token operator">=</span> newRequestModule<span class="token punctuation">;</span>
<span class="token function">inventoryTracker</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> req<span class="token punctuation">,</span> <span class="token string">'www.inventory-awesome.io'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="对象和数据结构"><a href="#对象和数据结构" class="header-anchor">#</a> 对象和数据结构</h2> <h3 id="使用getters和setters"><a href="#使用getters和setters" class="header-anchor">#</a> 使用getters和setters</h3> <p>通过getters和setters来访问对象上的数据，可以做挺多的统一前置、后置操作处理。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">makeBankAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    balance<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> account <span class="token operator">=</span> <span class="token function">makeBankAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
account<span class="token punctuation">.</span>balance <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">makeBankAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 模拟 private</span>
  <span class="token keyword">let</span> balance <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">setBalance</span><span class="token punctuation">(</span><span class="token parameter">amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 前置操作</span>
    <span class="token comment">// ...</span>
    balance <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token comment">// 后置操作</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    getBalance<span class="token punctuation">,</span>
    setBalance<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> account <span class="token operator">=</span> <span class="token function">makeBankAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
account<span class="token punctuation">.</span><span class="token function">setBalance</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="让对象拥有私有成员"><a href="#让对象拥有私有成员" class="header-anchor">#</a> 让对象拥有私有成员</h3> <p>通过闭包完成。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> <span class="token function-variable function">Employee</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Employee</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Employee name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>employee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Employee name: John Doe</span>
<span class="token keyword">delete</span> employee<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Employee name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>employee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Employee name: undefined</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">makeEmployee</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> employee <span class="token operator">=</span> <span class="token function">makeEmployee</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Employee name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>employee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Employee name: John Doe</span>
<span class="token keyword">delete</span> employee<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Employee name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>employee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Employee name: John Doe</span>
</code></pre></div><h2 id="类"><a href="#类" class="header-anchor">#</a> 类</h2> <h3 id="es2015-es6类优先与es5纯函数"><a href="#es2015-es6类优先与es5纯函数" class="header-anchor">#</a> ES2015/ES6类优先与ES5纯函数</h3> <p>经典的ES5类的继承、构造和定义可读性不太好。因此尽量优先使用ES6的类。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> <span class="token function-variable function">Animal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Animal</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Instantiate Animal with `new`'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">move</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Mammal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span> furColor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Mammal</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Instantiate Mammal with `new`'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>furColor <span class="token operator">=</span> furColor<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Mammal</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Mammal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Mammal<span class="token punctuation">;</span>
<span class="token class-name">Mammal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">liveBirth</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">liveBirth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Human</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span> furColor<span class="token punctuation">,</span> languageSpoken</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Human</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Instantiate Human with `new`'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">Mammal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> age<span class="token punctuation">,</span> furColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>languageSpoken <span class="token operator">=</span> languageSpoken<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Human</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Mammal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Human</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Human<span class="token punctuation">;</span>
<span class="token class-name">Human</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">speak</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Mammal</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span> furColor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>furColor <span class="token operator">=</span> furColor<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">liveBirth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Human</span> <span class="token keyword">extends</span> <span class="token class-name">Mammal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span> furColor<span class="token punctuation">,</span> languageSpoken</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span> furColor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>languageSpoken <span class="token operator">=</span> languageSpoken<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用方法链"><a href="#使用方法链" class="header-anchor">#</a> 使用方法链</h3> <p>方法链在JavaScript中是非常有用的，并在许多类库比如jQuery和Lodash中见到。它允许你的代码变得富有表现力，并减少啰嗦。在类/方法中返回this，就可以把类的其它方法链在一起。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>make <span class="token operator">=</span> <span class="token string">'Honda'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>model <span class="token operator">=</span> <span class="token string">'Accord'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setMake</span><span class="token punctuation">(</span><span class="token parameter">make</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>make <span class="token operator">=</span> make<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setModel</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>model <span class="token operator">=</span> model<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setColor</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>make<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>model<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
car<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">'pink'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
car<span class="token punctuation">.</span><span class="token function">setMake</span><span class="token punctuation">(</span><span class="token string">'Ford'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
car<span class="token punctuation">.</span><span class="token function">setModel</span><span class="token punctuation">(</span><span class="token string">'F-150'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
car<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>make <span class="token operator">=</span> <span class="token string">'Honda'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>model <span class="token operator">=</span> <span class="token string">'Accord'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setMake</span><span class="token punctuation">(</span><span class="token parameter">make</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>make <span class="token operator">=</span> make<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setModel</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>model <span class="token operator">=</span> model<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setColor</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>make<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>model<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">'pink'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMake</span><span class="token punctuation">(</span><span class="token string">'Ford'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setModel</span><span class="token punctuation">(</span><span class="token string">'F-150'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="组合优先于继承"><a href="#组合优先于继承" class="header-anchor">#</a> 组合优先于继承</h3> <p>尽可能先优先使用组合而不是继承。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> email</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">EmployeeTaxData</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">ssn<span class="token punctuation">,</span> salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ssn <span class="token operator">=</span> ssn<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">EmployeeTaxData</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">ssn<span class="token punctuation">,</span> salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ssn <span class="token operator">=</span> ssn<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> email</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setTaxData</span><span class="token punctuation">(</span><span class="token parameter">ssn<span class="token punctuation">,</span> salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>taxData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeTaxData</span><span class="token punctuation">(</span>ssn<span class="token punctuation">,</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="健壮性"><a href="#健壮性" class="header-anchor">#</a> 健壮性</h2> <h3 id="单一职责原则-srp"><a href="#单一职责原则-srp" class="header-anchor">#</a> 单一职责原则(SRP)</h3> <p>正如代码整洁之道所述，&quot;永远不要有超过一个理由来修改一个类&quot;。给一个类塞满许多功能，就像你在航班上只能带一个行李箱一样，这样做的会导致类缺少内聚性，经常对它进行修改。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">class</span> <span class="token class-name">UserSettings</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> user<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">changeSettings</span><span class="token punctuation">(</span><span class="token parameter">settings</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">verifyCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">verifyCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">UserAuth</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> user<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">verifyCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">UserSettings</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> user<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>auth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserAuth</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">changeSettings</span><span class="token punctuation">(</span><span class="token parameter">settings</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">verifyCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="开闭原则-ocp"><a href="#开闭原则-ocp" class="header-anchor">#</a> 开闭原则(OCP)</h3> <p>Bertrand Meyer说过，&quot;软件实体(类、模块、函数等)应该为扩展开放，但是为修改关闭。&quot;这是什么意思呢？这个原则基本上说明了你应该允许用户添加功能而不必修改现在的代码。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">class</span> <span class="token class-name">AjaxAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">Adapter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'ajaxAdapter'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">NodeAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">Adapter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'nodeAddapter'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">HttpRequester</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">adapter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>adapter <span class="token operator">=</span> adapter<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adapter<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'ajaxAdapter'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">makeAjaxCall</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adapter<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'httpNodeAdapter'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">makeHttpCall</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">makeAjaxCall</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">makeHttpCall</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">AjaxAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">Adapter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'ajaxAdapter'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">request</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">NodeAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">Adapter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'nodeAdapter'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">request</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">HttpRequest</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">adapter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>adapter <span class="token operator">=</span> adapter<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>adapter<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="liskov替换原则-lsp"><a href="#liskov替换原则-lsp" class="header-anchor">#</a> Liskov替换原则(LSP)</h3> <p>里氏替换原则，<strong>子类可以扩展父类的功能，但不能改变父类原有的功能</strong>。也就是说：子类继承父类时，除添加新的方法完成新增功能外，尽量不要重写父类的方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setColor</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">area</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token parameter">width</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token parameter">height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
  <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token parameter">width</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> width<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token parameter">height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> height<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderLargeRectangles</span><span class="token punctuation">(</span><span class="token parameter">rectangles</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rectangles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">rectangle</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rectangle<span class="token punctuation">.</span><span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> area <span class="token operator">=</span> rectangle<span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// BAD: 返回了25，应该返回20</span>
    rectangle<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> rectangles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">renderLargeRectangles</span><span class="token punctuation">(</span>rectangles<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">setColor</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">area</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">widht<span class="token punctuation">,</span> height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderLargeShapes</span><span class="token punctuation">(</span><span class="token parameter">shapes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  shapes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> area <span class="token operator">=</span> shape<span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    shape<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> shapes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">renderLargeShapes</span><span class="token punctuation">(</span>shapes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="接口隔离原则-isp"><a href="#接口隔离原则-isp" class="header-anchor">#</a> 接口隔离原则(ISP)</h3> <p>JavaScript没有接口，所以这个原则不像其它语言那么严格。不过，对于JavaScript这种缺少类型的语言来说，它依然是重要并且有意义的。</p> <p>接口隔离原则说的是&quot;客户端不应该强制依赖他们不需要的接口。&quot;在JavaScript这种弱类型语言中，接口是隐式的契约。</p> <p>在JavaScript中能比较好的说明这个原则的是一个类需要一个巨大的配置对象。不需要客户端去设置大量的选项是有益的，因为多数情况下他们不需要全部的设置。让它们变成可选的有助于防止出现一个&quot;胖接口&quot;。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">class</span> <span class="token class-name">DOMTraverser</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">settings</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>settings <span class="token operator">=</span> settings<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>rootNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>settings<span class="token punctuation">.</span>rootNode<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>animationModule<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> $ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMTraverser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  rootNode<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">animationModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">DOMTraverser</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">settings</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>settings <span class="token operator">=</span> settings<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> settings<span class="token punctuation">.</span>options<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  setup <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>rootNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>settings<span class="token punctuation">.</span>rootNode<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setupOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setupOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>animationModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> $ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMTraverser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  rootNode<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  options<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">animationModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="依赖反转原则-dip"><a href="#依赖反转原则-dip" class="header-anchor">#</a> 依赖反转原则(DIP)</h3> <p>这个原则阐述了两个重要的事情：</p> <ol><li>高级模块不应该依赖于低级模块，两者都应该依赖于抽象。</li> <li>抽象不应当依赖于具体实现，具体实现应当依赖于抽象。</li></ol> <p>如上所述，JavaScript没有接口，所以被依赖的抽象是隐式契约。也就是说，一个对象/类的方法和属性直接暴露给另外一个对象/类。在下面的例子中，任何一个Request模块的隐式契约InventoryTracker将有一个requestItems方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">class</span> <span class="token class-name">InventoryRequester</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">REQ_METHODS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'HTTP'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">requestItem</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">InventoryTracker</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">items</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> items<span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>requester <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InventoryRequester</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">requestItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>requester<span class="token punctuation">.</span><span class="token function">requestItem</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> inventoryTracker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InventoryTracker</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token string">'bananas'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inventoryTracker<span class="token punctuation">.</span><span class="token function">requestItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">InventoryTracker</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">items<span class="token punctuation">,</span> requester</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> items<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>requester <span class="token operator">=</span> requester<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">requestItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>requester<span class="token punctuation">.</span><span class="token function">requestItem</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">InventoryRequesterV1</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">REQ_METHODS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'HTTP'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">requestItem</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">InventoryRequesterV2</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">REQ_METHODS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'WS'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">requestItem</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> inventoryTracker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InventoryTracker</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token string">'bananas'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InventoryRequesterV2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inventoryTracker<span class="token punctuation">.</span><span class="token function">requestItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="并发性"><a href="#并发性" class="header-anchor">#</a> 并发性</h2> <h3 id="使用promises而不是callback"><a href="#使用promises而不是callback" class="header-anchor">#</a> 使用Promises而不是callback</h3> <p>回调不够简洁，因为他们会产生过多的嵌套。在ES2015/ES6中，Promises已经是内置的全局类型了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> get <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'request'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> writeFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span>

<span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'xxx/xxx'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">requestErr<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>requestErr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>requestErr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'xxxx'</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">writeErr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>writeErr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>writeErr<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> get <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'request'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> writeFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span>

<span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'xxxx'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="async-await比promises更加简洁"><a href="#async-await比promises更加简洁" class="header-anchor">#</a> Async/Await比Promises更加简洁</h3> <p>Promises是回调的一个非常简洁的替代品，但是ES2017/ES8带来的async和await提供了一个更加简洁的解决方案。你需要的只是一个前缀为async关键字的函数，接下来就可以不需要then函数链来编写逻辑了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> get <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'request-promise'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> writeFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs-promise'</span><span class="token punctuation">;</span>

<span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> get <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'request-promise'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> writeFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs-promise'</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getCleanCodeArticle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="容错性"><a href="#容错性" class="header-anchor">#</a> 容错性</h2> <p>抛出错误是一件好事情！他们意味着当你的程序有错时运行时可以成功确认，并且通过停止执行当前堆栈上的函数来让你知道，结束当前进程，在控制器中用一个堆栈跟踪提示你。</p> <h3 id="不要忽略捕捉错误"><a href="#不要忽略捕捉错误" class="header-anchor">#</a> 不要忽略捕捉错误</h3> <p>对捕捉到的错误不做任何处理不能给你修复错误或者响应错误的能力。向控制台记录错误也不怎么好，因为往往会丢失在海量的控制台输出中。如果你把任意一段代码用try/catch包装那就意味着你想到这里可能会错，因此你应该有个修复计划，或者当错误发生时有一个代码路径。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">functionThatMightThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">functionThatMightThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">notifyUserOfError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">reportErrorToService</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="不要忽略被拒绝的promise"><a href="#不要忽略被拒绝的promise" class="header-anchor">#</a> 不要忽略被拒绝的promise</h3> <p>与你不应忽略来自try/catch的错误的原因相同。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token function">getdata</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">functionThatMightThrow</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Good</span>
<span class="token function">getdata</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">functionThatMightThrow</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">notifyUserOfError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">reportErrorToService</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="格式化"><a href="#格式化" class="header-anchor">#</a> 格式化</h2> <p>格式化是主观的。就像其它规则一样，没有必须让你遵循的硬性规则。重点是不要因为格式去争论，使用工具来自动格式化即可。</p> <h3 id="保持大小写一致"><a href="#保持大小写一致" class="header-anchor">#</a> 保持大小写一致</h3> <p>JavaScript是无类型的，所以大小写告诉你关于你的变量、函数等的很多事情。这些规则是主观的，所以你的团队可以选择他们想要的。重点是，不管你们选择了什么，要保持一致。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">const</span> <span class="token constant">DAYS_IN_WEEK</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> daysInMonth <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> songs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Back In Black'</span><span class="token punctuation">,</span> <span class="token string">'Stairway to Heaven'</span><span class="token punctuation">,</span> <span class="token string">'Hey Jude'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Artists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'ACDC'</span><span class="token punctuation">,</span> <span class="token string">'Led Zepplein'</span><span class="token punctuation">,</span> <span class="token string">'The Beatles'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">eraseDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">restore_database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">animal</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Alpaca</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">const</span> <span class="token constant">DAYS_IN_WEEK</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">DAYS_IN_MONTH</span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> songs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Back In Black'</span><span class="token punctuation">,</span> <span class="token string">'Stairway to Heaven'</span><span class="token punctuation">,</span> <span class="token string">'Hey Jude'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> artists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'ACDC'</span><span class="token punctuation">,</span> <span class="token string">'Led Zeppelin'</span><span class="token punctuation">,</span> <span class="token string">'The Beatles'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">eraseDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">restoreDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Alpaca</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="函数的调用方与被调用方应该靠近"><a href="#函数的调用方与被调用方应该靠近" class="header-anchor">#</a> 函数的调用方与被调用方应该靠近</h3> <p>如果一个函数调用另一个，则在代码中这两个函数的竖直位置应该靠近。理想情况下，保持被调用函数在被调用函数的正上方。我们倾向于从上到下阅读代码，就像读一章报纸。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">class</span> <span class="token class-name">PerformanceReview</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">employee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>employee <span class="token operator">=</span> employee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">lookupPeers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>employee<span class="token punctuation">,</span> <span class="token string">'peers'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">lookupManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>employee<span class="token punctuation">,</span> <span class="token string">'manager'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getPeerReviews</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> peers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lookupPeers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token function">perfReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPeerReviews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getManagerReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSelfReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getManagerReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> manager <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lookupManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getSelfReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> review <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformanceReview</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
review<span class="token punctuation">.</span><span class="token function">perfReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">PerformanceReview</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">employee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>employee <span class="token operator">=</span> employee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">perfReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPeerReviews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getManagerReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSelfReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getPeerReviews</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> peers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lookupPeers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token function">lookupPeers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>employee<span class="token punctuation">,</span> <span class="token string">'peers'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getManagerReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> manager <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lookupManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">lookupManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>employee<span class="token punctuation">,</span> <span class="token string">'manager'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getSelfReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> review <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformanceReview</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
review<span class="token punctuation">.</span><span class="token function">perfReview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h2> <h3 id="仅仅对包含复杂业务逻辑的代码进行注释"><a href="#仅仅对包含复杂业务逻辑的代码进行注释" class="header-anchor">#</a> 仅仅对包含复杂业务逻辑的代码进行注释</h3> <p>注释是代码的解释，不是要求。多数情况下，好的代码就是文档。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token keyword">function</span> <span class="token function">hashIt</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这是hash</span>
  <span class="token keyword">let</span> hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// 字符长度</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

  <span class="token comment">// 遍历字符串</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取字符编码</span>
    <span class="token keyword">const</span> char <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 制造Hash</span>
    hash <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hash <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">-</span> hash<span class="token punctuation">)</span> <span class="token operator">+</span> char<span class="token punctuation">;</span>
    <span class="token comment">// 转换为32位数字</span>
    hash <span class="token operator">&amp;=</span> hash<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">hashIt</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> char <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    hash <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hash <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">-</span> hash<span class="token punctuation">)</span> <span class="token operator">+</span> char<span class="token punctuation">;</span>
    <span class="token comment">// 转换为32位数字</span>
    hash <span class="token operator">&amp;=</span> hash<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="不要在代码库中保存注释掉的代码"><a href="#不要在代码库中保存注释掉的代码" class="header-anchor">#</a> 不要在代码库中保存注释掉的代码</h3> <p>因为有版本控制，把旧的代码留在历史记录即可。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token function">doStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// doOtherStuff();</span>
<span class="token comment">// doSomeMoreStuff();</span>
<span class="token comment">// doSoMuchStuff();</span>

<span class="token comment">// Good</span>
<span class="token function">doStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="不要有日志式的评论"><a href="#不要有日志式的评论" class="header-anchor">#</a> 不要有日志式的评论</h3> <p>记住，使用版本控制！不需要僵尸代码，注释掉的代码，尤其是日志式的评论。使用git log来获取历史记录。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token comment">/**
 * 2016-12-20: Removed monads, didn't understand them (RM)
 * 2016-10-01: Improved using special monads (JP)
 * 2016-02-03: Removed type-checking (LI)
 * 2015-03-14: Added combine with type-checking (JR)
 */</span>
<span class="token keyword">function</span> <span class="token function">combine</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Good</span>
<span class="token keyword">function</span> <span class="token function">combine</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="避免不必要的占位符"><a href="#避免不必要的占位符" class="header-anchor">#</a> 避免不必要的占位符</h3> <p>它们仅仅添加了干扰性。让函数和变量名称与合适的缩进和格式化为你的代码提供视觉结构。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bad</span>
<span class="token comment">////////////////////////////////////////////////////////////////////////////////</span>
<span class="token comment">// Scope Model Instantiation</span>
<span class="token comment">////////////////////////////////////////////////////////////////////////////////</span>
$scope<span class="token punctuation">.</span>model <span class="token operator">=</span> <span class="token punctuation">{</span>
  menu<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
  nav<span class="token operator">:</span> <span class="token string">'bar'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">////////////////////////////////////////////////////////////////////////////////</span>
<span class="token comment">// Action setup</span>
<span class="token comment">////////////////////////////////////////////////////////////////////////////////</span>
<span class="token keyword">const</span> <span class="token function-variable function">actions</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Good</span>
$scope<span class="token punctuation">.</span>model <span class="token operator">=</span> <span class="token punctuation">{</span>
  menu<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
  nav<span class="token operator">:</span> <span class="token string">'bar'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">actions</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新时间:</span> <span class="time">2023/3/21 19:40:56</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/library/knowledge/web/javascript/编写规范/代码注释.html" class="prev">
        代码注释
      </a></span> <span class="next"><a href="/library/knowledge/web/vue/read.html">
        介绍
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/library/assets/js/app.14bf9413.js" defer></script><script src="/library/assets/js/2.148df1f8.js" defer></script><script src="/library/assets/js/408.7af1a51a.js" defer></script><script src="/library/assets/js/3.4d3fc6f6.js" defer></script>
  </body>
</html>
