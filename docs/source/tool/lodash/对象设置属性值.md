---
title: 对象设置属性值
---

# 对象设置属性值

```js
function baseAssignValue(object, key, value) {
  if (key == '__proto__') {
    Object.defineProperty(object, key, {
      'configurable': true,
      'enumerable': true,
      'value': value,
      'writable': true
    });
  } else {
    object[key] = value;
  }
}
```

`__proto__`不是对象的一个标准属性，本来它应该和对象其他自定义属性一样，不应该有任何特别的，但是由于历史原因，基本所有的浏览器都实现了这个属性，用来保存对象的原型。

并且根据`MDN`的描述，这个属性还有如下特点：

> **proto** 的设置器(setter)允许对象的`[[Prototype]]被变更。前提是这个对象必须通过` [`Object.isExtensible()`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/isExtensible) 判断为是可扩展的，如果不可扩展，则会抛出一个[`TypeError`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError)错误。要变更的值必须是一个object或[`null`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null)，提供其它值将不起任何作用。

也就是说，像其它属性一样，直接给`__proto__`赋值，如果值不是对象，或者是不可扩展的对象，是可能会报错的。

而且 `__proto__` 也是不可枚举的。

因此，`lodash`使用`defineProperty`来给`__proto__`来赋值，并且将`__proto__`的`configurable`、`enumerable`、`writable`都设置为`true`，这样`__proto__`和其他属性一样，都是可配置、可枚举、可写的属性了。