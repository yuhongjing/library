---
title: 模板方法模式
---

# 模板方法模式
`模板方法模式`(Template Pattern)定义一个操作中的算法的`骨架`，而将一些步骤`延迟`到子类中。模板方法使得子类可以不改变一个算法的`结构`即可重定义该算法的某些`特定步骤`。

`模板方法模式`属于`行为型设计模式`。

## 适用场景
* 当算法的骨架是固定的时候，而算法的实现有很多可能的时候，就需要使用模板方法模式。
* 多个子类共有的方法，且`逻辑`相同，也可以适用模板方法模式。

如此的话，可以极大的简化代码量，也符合`开放-封闭`原则。

## 核心思想
模板方法模式是通过把不变行为搬移到超类，去除子类中的重复代码来体现它的优势。  

当`不变`的和`可变`的行为在方法的子类实现中`混合`在一起的时候，不变的行为就会在子类中`重复`出现。通过模板方法模式把这些行为搬移到单一的地方，这样就帮助子类摆脱了重复的不变行为的纠缠。

## 举例说明
泡茶和泡咖啡的制作流程几乎一致，仅仅是放置材料的区别。
```js
class Beverage {
    make() {
        // 制作饮品的流程
        this.boilWater(); // 烧水
        this.pourInCup(); // 放材料
        this.taste(); // 品尝
    }
    boilWater() {
        console.log('煮沸水');
    }
    pourInCup() {
        console.log('泡制材料放入杯子');
    }
    taste() {
        console.log('开始品尝吧');
    }
}

class Tea extends Beverage {
    pourInCup() {
        console.log('茶叶放入杯子');
    }
}

class Coffee extends Beverage {
    pourInCup() {
        console.log('咖啡豆放入杯子');
    }
}

// 客户端
// 减少了代码量 并且容易添加不同的饮品 而不违反 开放-封闭原则
const tea = new Tea();
tea.make(); // 煮沸水 茶叶放入杯子 开始品尝吧

const coffee = new Coffee();
coffee.make(); // 煮沸水 咖啡豆放入杯子 开始品尝吧
```

## 总结
当我们要完成在某一细节层次一致的一个过程或一系列步骤，但其个别步骤在更详细的层次上的实现可能不同时，通常考虑使用模板方法模式来处理。

优点:
* 精简重复代码
* 子类实现细节的处理时，不会改变父类的结构
* 可实现反向控制结构，通过子类父类的钩子方法决定是否执行某一特定步骤
* 符合开放-封闭原则

::: tip 提示
在`javascript`中，我们不需要依样画瓢去实现一个模板方法模式。  
因为`高阶函数`是一个更好的选择。
:::