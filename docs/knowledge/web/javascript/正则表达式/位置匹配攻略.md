---
title: 位置匹配攻略
---

# 位置匹配攻略

正则表达式是匹配模式，要么匹配字符，要么匹配位置。请记住这句话。

然而大部分人学习正则时，对于匹配位置的重视程度没有那么高。



## 什么是位置呢？

位置（锚）是相邻字符之间的位置。如下，下图中箭头所指的地方：

![](https://raw.githubusercontent.com/yuhongjing/img-folder/master/img/20191216214630.png)



## 如何匹配位置呢？

在ES5中，共有6个锚：

`^、$、\b、\B、(?=)、(?!)`



### ^和$

`^`(脱字符)匹配开头，在多行匹配中匹配行开头。

`$`(美元符号)匹配结尾，在多行匹配中匹配行结尾。

比如我们把字符串的开头和结尾用"#"替换(**位置可以替换成字符的！**)

```js
const result = "hello".replace(/^|$/g, '#');
console.log(result);
// => "#hello#"
```

多行匹配模式(即有修饰符`m`)时，二者是行的概念，这一点需要我们注意：

```js
const result = "I\nlove\njavascript".replace(/^|$/gm, '#');
console.log(result);
/*
#I#
#love#
#javascript#
*/
```



### \b和\B

`\b`是单词边界，具体就是`\w`与`\W`之间的位置，也包括`\w`与`^`之间的位置，和`\w`与`$`之间的位置。

比如考察文件名"[JS] Lesson_01.mp4"中的`\b`，如下：

```js
const result = "[JS] Lesson_01.mp4".replace(/\b/g, '#');
console.log(result);
// => "[#JS#] #Lesson_01#.#mp4#"
```

为什么是这样呢？这需要仔细看看。

首先，我们知道，`\w`是字符组`[0-9a-zA-Z_]`的简写形式，即`\w`是字母数字或者下划线的中任何一个字符。而`\W`是排除字符组`[^0-9a-zA-Z_]`的简写形式，即`\W`是`\w`以外的任何一个字符。

此时我们可以看看"[#JS#] #Lesson_01#.#mp4#"中的每一个井号，是怎么来的。

第1个，两边字符是"["与"J"，是`\W`与`\w`之间的位置。

第2个，两边字符是"S"与"]"，是`\w`与`\W`之间的位置。

第3个，两边字符是空格与"L"，是`\W`与`\w`之间的位置。

第4个，两边字符是"1"与"."，是`\w`与`\W`之间的位置。

第5个，两边字符是"."与"m"，是`\W`与`\w`之间的位置。

第6个，位于结尾，前面的字符"4"是`\w`，即`\W`与`$`之间的位置。

知道了`\b`的概念后，那么`\B`也就相对好理解了。

`\B`就是`\b`的反面的意思，非单词边界。例如在字符串中所有的位置中，扣掉`\b`，剩下的都是`\B`的。

具体来说就是`\w`与`\w`、`\W`与`\W`、`^`与`\W`、`\W`与`$`之间的位置。

例如上面的例子，把所有的`\B`替换成"#"：

```js
const result = "[JS] Lesson_01.mp4".replace(/\B/g, '#');
console.log(result);
// => "#[J#S]# L#e#s#s#o#n#_#0#1.m#p#4"
```



### (?=)和(?!)

